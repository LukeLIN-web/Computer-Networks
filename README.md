

[TOC]

Notebook 1

## lec1 

2021å¹´6æœˆ è®¡ç®—æœºç½‘ç»œä¹¦æ›´æ–°äº†.åå¹´æ›´æ–°ä¸€æ¬¡.  

preçš„topic åœ¨ç¬¬ä¸€ç« pptä¸Š.

 ç”¨æˆ·å…¶å®ååº”å¾ˆæ…¢, å¤§ä¼šä¸Šå­¦æœ¯æ˜¯å¼•é¢†æ½®æµçš„.

æ€ä¹ˆè®©äººå‡ºäº†åŸºç«™ä¹Ÿä¸ä¼šæ–­ç½‘ï¼Ÿ

5Gæœ€å¿«æœ‰10Gbps, åœ¨2020å¹´å¤§è§„æ¨¡ä½¿ç”¨.

æ— æœåŠ¡å™¨è®¡ç®—, ä¹°çš„æ—¶å€™æˆ‘ç›´æ¥ä¹°ä¸€ä¸ªå«å‡½æ•°è®¡ç®—çš„ä¸œè¥¿ã€‚å»ä¹°äº‘è®¡ç®—çš„èµ„æºï¼Œæˆ‘ä¸éœ€è¦ä¹°ä¸€å°æœåŠ¡å™¨,æˆ‘ç”šè‡³ä¸éœ€è¦ä¹°ä¸€ä¸ªå®¹å™¨, æœ‰äººå‘è¯·æ±‚,åœ¨å®æ—¶çš„åœ¨äº‘ä¸Šé¢ç»™æˆ‘åˆ›å»ºå‡ºæ¥ä¸€ä¸ªå¯ä»¥è¢«æˆ‘è¿è¡Œäººè„¸è¯†åˆ«,å‡ºæ¥ä¹‹åè¿è¡Œå®Œäº†ä¹‹åï¼Œå¦‚æœæ²¡æœ‰å†æœ‰æ–°çš„è¯·æ±‚çš„è¯ï¼Œæˆ‘å°±ç›´æ¥é”€æ¯æ‰ï¼Œé‚£æˆ‘å°±ä¸ç”¨ä»˜é’±äº†.  

å·¨å¤§çš„æ•°æ®ä¸­å¿ƒ, çº¿æ˜¯æ€ä¹ˆé“¾æ¥çš„?  åŸºæœ¬ä¸Šæ˜¯ä¸ªæ ‘,

äº¤æ¢æœºçš„ç½‘å£å’Œä»·æ ¼ä¸æ˜¯çº¿æ€§å…³ç³», å£å¾ˆå¤šçš„æ—¶å€™éå¸¸è´µ.å››å£çš„å‡ åå—ä¸€ä¸¤ç™¾å—.

äº‘æ –å¤§ä¼š, æŠŠä¸€å°æœºå™¨æ‹”å‡ºæ¥, æ•°å­—æ²¡æœ‰å‡ºé”™, ç”¨å¤§é‡å»‰ä»·æœåŠ¡å™¨å®ç°é«˜å¯ç”¨.  

æ•°æ®ä¸­å¿ƒç”¨çš„ç”µ, é™¤äº†æœåŠ¡å™¨, è¿˜æœ‰å¾ˆå¤§ä¸€å—æ˜¯ç©ºè°ƒ,  ä¹‹å‰ä¸€å¤§åŠéƒ½æ˜¯ç©ºè°ƒ, æ•£çƒ­æˆæœ¬éå¸¸é«˜, æ‰€ä»¥ç”µè´¹æ˜‚è´µ.

IOT å®‰å…¨, è§†é¢‘æµæ”»å‡».  äº§å€¼è¾¾åˆ°1.26ä¸‡äº¿ç¾å…ƒ.

RFID , ä¹‹å‰ç”¨äºè‹è”çªƒå¬ç¾å›½, æ— æºæ— çº¿ç”µæ³¢è·å¾—ä¿¡æ¯.  ç‰©è”ç½‘çš„æŠ€æœ¯,  ç”µæºæŠ€æœ¯,  è®©èœ»èœ“å¾ˆè½»ä¹Ÿå¯ä»¥é£èµ·æ¥. 

## lec2

layeræœ‰ä»€ä¹ˆå¥½å¤„?æˆ‘ç”¨ç½‘çº¿, æ— çº¿,  è®¿é—®çš„ipåœ°å€éƒ½æ˜¯ä¸€æ ·çš„. åˆ†å±‚å¯ä»¥è®©å¾ˆå¤šéƒ½ä¿æŒä¸€è‡´.

ä¸ºä»€ä¹ˆæ²¡æœ‰å…¨éƒ¨ç”¨OSI æ¨¡å‹? å› ä¸ºä»·æ ¼å¾ˆé«˜. 

è€ƒé¢˜: actual æ€ä¹ˆèµ°, virtual æ€ä¹ˆèµ°. 

OSI  ä¸‰è¦ç´  , services, interface, protocols.

ç‰©ç†å±‚ : concerned with transmitting raw bits over a communication channel. 

Data link layer (æ•°æ®é“¾è·¯å±‚):   take a raw transmission facility and transform it into a line that appears free of undetected transmission errors to the network layer

Network layer(ç½‘ç»œå±‚) : This layer is concerned with controlling the operation of the subnet. 

ä¼ è¾“å±‚: æ¥å—ä¸Šå±‚, åˆ†æˆå°unit, ä¼ åˆ°ç½‘ç»œå±‚, ç¡®ä¿å‘é€. To accept data from the session layer, split it up info smaller units if need be, pass these to the network layer, and ensure that the pieces all arrive correctly at the other end.è¦è€ƒè™‘ multiplexing, æ€ä¹ˆè®©session layer å¤šè·¯å¤ç”¨.

ä¼šè¯å±‚:To allow users on different machines to establish sessions between them

è¡¨ç¤ºå±‚: The presentation layer is concerned with the syntax and semantics of the information transmitted.

1kB/s =  1000bytes/second ä¸æ˜¯1024

## lec3 ç‰©ç†å±‚

æ¯å¹´éƒ½ä¼šè€ƒnoise çš„è®¡ç®—. è€ƒè¯•å¯èƒ½å‘Šè¯‰ä½  S , N  , V ,  åŠ å…¥å¾ˆå¤šå¹²æ‰°é¡¹, å–äº¤é›†.  

data rate == symbol rate 

The maximum data rate of a channel 

 å¥ˆå¥æ–¯ç‰¹Nyquist æå‡º maximum data rate for a finite bandwidth noiseless channel: Max data rate = 2H log2 V bits/sec, or Max symbol rate = 2H where H is the bandwith, V is the discrete levels
â€“ If we use B to denote the data rate (bits/s), and S to denote the symbol rate (symbol/s), B <= 2H log2 V ,S <= 2H

æœ‰é™å¸¦å®½çš„æœ€å¤§é€Ÿç‡:finite bandwidth noiseless channel
$$
Max\ data\ rate= 2 *H*log_2(V)bits/sec
$$
 or Max symbol rate = 2H

 where H is the bandwith, V is the discrete levelsã€‚

ä¾‹å¦‚ 4ä¸ªç›¸ä½ï¼Œæ¯ä¸ªç›¸ä½4ç§å¹…åº¦QAM ï¼Œ é‚£ä¹ˆ Vå°±ç­‰äº16

è€ƒç‚¹å°±æ˜¯è¿™å‡ ä¸ªå…¬å¼.  æœ‰å™ªå£°:

$$
Max\ data\ rate= H*log_2(1+S/N)bits/sec
$$
The max data rate of a channel  é¦™æµ“ Shannon æå‡º random noise Max data rate = H log 2 (1+S/N) bits/sec where S/N is the signal to noise ratio
â€“ If we use B to/ denote the data rate (bits/s) B <= H log 2 (1+S/N)
â€“ SNR: typically measured in dB, decibel dB = 10log10 S/N Ex: S/N=10â†’10dB, S/N=100â†’20dB, ...

æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼Œå‰é¢é«˜åé¢ä½è¡¨ç¤º0 æˆ–è€…1ã€‚  NRZï¼Œ é«˜ä¸º1 ï¼Œ NRZI ç¿»è½¬ä¸º1 . 

æ•°æ®ä¼ è¾“ç‡C = æ³¢ç‰¹ç‡B  x log2ï¼ˆNï¼‰ Nä¸ºç å…ƒå¯å–çš„ç¦»æ•£å€¼ä¸ªæ•°ã€‚   

 

#### ç½‘ç»œè®¾å¤‡

ä¸­ç»§å™¨å’Œé›†çº¿å™¨hubåœ¨ç‰©ç†å±‚,  

ç½‘æ¡¥åœ¨æ•°æ®é“¾è·¯å±‚, å¯ä»¥ éš”ç¦»å†²çªåŸŸ,  ä½†æ˜¯ä¸èƒ½éš”ç¦»å¹¿æ’­åŸŸ.

äº¤æ¢æœºswitch åœ¨ æ•°æ®é“¾è·¯å±‚,  ç›¸å½“äºå¤šç«¯å£çš„ç½‘æ¡¥, å†²çªåŸŸ = ç«¯å£ä¸ªæ•°, å¹¿æ’­åŸŸä¸º1

è·¯ç”±å™¨router åœ¨ipå±‚. å¯ä»¥ éš”ç¦»å†²çªåŸŸå’Œéš”ç¦»å¹¿æ’­åŸŸ. å¯ä»¥é˜²æ­¢å¹¿æ’­é£æš´

## lec4 æ•°æ®é“¾è·¯å±‚

macå±‚ä¼šå•ç‹¬è®². æ•°æ®é“¾è·¯å±‚è¦ ç»™å¸§ç¡®å®šç•Œé™, ä¹Ÿå¯ä»¥å®ç°å·®é”™æ§åˆ¶å’Œæµé‡æ§åˆ¶ 

#### services 

æ— ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡. ä¸éœ€è¦å»ºç«‹é“¾è·¯è¿æ¥, æ”¶åˆ°åæ²¡æœ‰ç¡®è®¤, ä¸¢å¤±åä¹Ÿä¸é‡å‘è€Œæ˜¯äº¤ç»™ä¸Šå±‚å¤„ç†. é€‚ç”¨äºå®æ—¶é€šä¿¡ æˆ–è€…è¯¯ç ç‡è¾ƒä½çš„é€šä¿¡ä¿¡é“, æ¯”å¦‚ä»¥å¤ªç½‘.

wifi ç­‰æ— çº¿é€šä¿¡ æ˜¯æœ‰ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡.  æ”¶åˆ°åè¦å‘å›ç¡®è®¤, é€‚åˆè¯¯ç ç‡è¾ƒé«˜çš„ä¿¡é“. 

#### framing

ç›®çš„ : æ£€æŸ¥å‘é€çš„æ•°æ®å¯¹è¿˜æ˜¯é”™

bytecount use a field in the header to specify frameä¸­çš„characteræ•°é‡ 

ç¼ºç‚¹: ä¸€ä¸ªé”™äº†, åé¢çš„è¿ç€éƒ½é”™äº†, PPPæœ‰ä¸ªç±»ä¼¼çš„ç‰ˆæœ¬.  é¢˜ç›®å¯èƒ½å«ä½ åˆ†å“ªäº›æ˜¯ç¬¬ä¸€ä¸ªframe,å“ªäº›æ˜¯ç¬¬äºŒä¸ªframe. 

flag,  æœ€å‰é¢å’Œæœ€åé¢ ç”¨flag . 

ç¼ºç‚¹: å¯èƒ½characteræµä¸­å’Œflag ä¸€æ¨¡ä¸€æ ·.   è§£å†³æ–¹æ³•:   è½¬ä¹‰å­—ç¬¦. ä¼šè€ƒæ¥å›è½¬ä¹‰.è€ƒè¯•ç»å¸¸åå‘è€ƒï¼ˆç»™HDLCå¸§ï¼Œè¿˜åŸæ•°æ®ï¼‰

##### Flag bytes with byte stuffing

è®©æ¯ä¸ªå¸§ä»¥ç‰¹æ®Šå­—èŠ‚å¼€å§‹å’Œç»“æŸã€‚ä¸¤ä¸ªè¿ç»­çš„æ ‡è®°å­—èŠ‚flag byteè¡¨ç¤ºä¸€ä¸ªå¸§çš„ç»“æŸå’Œä¸‹ä¸€ä¸ªå¸§çš„å¼€å§‹ã€‚å› æ­¤ï¼Œå¦‚æœæ¥æ”¶å™¨å¤±å»åŒæ­¥ï¼Œå®ƒå¯ä»¥æœç´¢ä¸¤ä¸ªæ ‡è®°å­—èŠ‚æ¥æ‰¾åˆ°å½“å‰å¸§çš„ç»“æŸå’Œä¸‹ä¸€å¸§çš„å¼€å§‹ã€‚ å½“è¿™ä¸ªæ ‡è®°å­—èŠ‚åœ¨**å¸§ä¸­**ï¼Œç”¨ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦escape byte (ESC) æ’å…¥åˆ°æ ‡è®°å­—èŠ‚å‰ã€‚æ¥æ”¶è€…æ”¶åˆ°åï¼Œåˆå°†è¿™ä¸ªè½¬ä¹‰å­—ç¬¦å»æ‰ï¼Œè¿™ä¸ªè¿‡ç¨‹å«byte stuffingå­—èŠ‚å¡«å…… 

ç¼ºç‚¹ï¼šæ·»åŠ è¿™äº›å­—èŠ‚ä¼šå¤§å¤§å¢åŠ æ¶ˆæ¯çš„å¤§å°

##### Flag bits with bit stuffing

æ¯ä¸€å¸§ä»¥01111110ä½æ¨¡å¼å¼€å§‹,è€Œä¸­é—´ä¸ä¼šæœ‰6ä¸ª0
â€¢å‘é€è€…:æ¯å½“æˆ‘ä»¬åœ¨æ•°æ®ä¸­çœ‹åˆ°äº”ä¸ª1æ—¶ï¼Œæˆ‘ä»¬å°±æ’å…¥ä¸€ä¸ª0
â€¢æ¥æ”¶å™¨:æ¯å½“æˆ‘ä»¬çœ‹åˆ°äº”ä¸ª1ï¼Œæˆ‘ä»¬å°±ä¼šç§»é™¤ä¸‹é¢çš„0
å®ƒä¸byte stuffing æ€æƒ³ä¸€æ ·ï¼Œä½†å¼€é”€æ›´å°
å”¯ä¸€é—®é¢˜å°±æ˜¯æœ€åçš„å¸§å¯ä»¥æ˜¯ä»»æ„ä½æ•°ï¼Œä½†å­—èŠ‚å¡«å……æ€»æ˜¯å­—èŠ‚æ•°
æ¯”ç‰¹å¡«å……æ³•æ˜¯é‡‡ç”¨ä¸€ç‰¹å®šçš„æ¯”ç‰¹ç»„åˆ01111110æ¥æ ‡å¿—å¸§çš„è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ ‡å¿—å­—èŠ‚ã€‚è¿™ç§æ–¹æ³•æ—¢å…è®¸æ•°æ®å¸§åŒ…å«ä»»æ„é•¿åº¦çš„å­—ç¬¦ï¼Œä¹Ÿå…è®¸æ¯ä¸ªå­—ç¬¦æœ‰ä»»æ„é•¿åº¦çš„ä½ã€‚ä¸ºäº†é¿å…åœ¨ä¼ é€çš„æ•°æ®ä¿¡æ¯ä¸­å¿ƒå‡ºç°ç›¸åŒæ¯”ç‰¹ç»„åˆè¢«è¯¯è®¤ä¸ºæ˜¯å¸§çš„é¦–ã€å°¾æ ‡å¿—ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œæ¯”ç‰¹å¡«å……(bit stuffing)
æ¯”ç‰¹å¡«å……æ³•å…·ä½“åœ°è¯´ï¼Œå‘é€ç«¯çš„æ•°æ®é“¾è·¯å±‚é‡åˆ°æ•°æ®æ¯”ç‰¹æµä¸­å‡ºç°5ä¸ªè¿ç»­â€œ1â€çš„æ—¶å€™ï¼Œå®ƒå°±è‡ªåŠ¨åœ¨è¾“å‡ºæ¯”ç‰¹æµä¸­æ’å…¥ä¸€ä¸ªâ€œ0â€;æ¥æ”¶ç«¯é‡åˆ°5ä¸ªè¾“å…¥æ¯”ç‰¹ä¸ºâ€œ1â€ï¼Œä¸”åé¢ç´§æ¥çš„æ˜¯â€œ0â€æ—¶ï¼Œè‡ªåŠ¨å°†å…¶åˆ é™¤ã€‚å­—ç¬¦å¡«å……æ³•çš„ä¸»è¦ç¼ºç‚¹æ˜¯ä¾èµ–äºç‰¹å®šçš„å­—ç¬¦æ¨¡å¼ã€‚

CDMAæ¯ä¸ªstation çš„chip sequence éƒ½æ˜¯ æ­£äº¤çš„. 

è€ƒè¯•é¢˜:

01111100 0111111110 framed by HDLC åè®®æ˜¯ä»€ä¹ˆ

è¿ç»­5ä¸ª1 åé¢è¦åŠ ä¸ª0 

CDMAçš„å‘é€, çœ‹Aå‘é€çš„æ˜¯ä»€ä¹ˆ

#### error detection and correction

ä¸»è¦è€ƒæ±‰æ˜ç å’ŒCRCå¾ªç¯å†—ä½™æ ¡éªŒç .

coding schemeçš„æ±‰æ˜è·ç¦»å°±æ˜¯ æ‰€æœ‰pair çš„æ±‰æ˜è·ç¦»çš„æœ€å°å€¼. 

æŠŠ1çš„ä¸ªæ•°å˜æˆå¶æ•°.  æ±‰æ˜è·ç¦»æ˜¯å¤šå°‘?  å˜ä¸€ä¸ªè‡³å°‘å˜å¦ä¸€ä¸ª, æ‰€ä»¥æœ€å°æ˜¯ 2 .

å¦‚æœè¦detect dä¸ªerrors , éœ€è¦ d+1 æ±‰æ˜è·ç¦» çš„code. 

To use Hamming distance to correct *d* errors, you need *2d+1* æ±‰æ˜è·ç¦» çš„code. 

detectâ€‚3-bitâ€‚error,theâ€‚hammingâ€‚distanceâ€‚needâ€‚toâ€‚beâ€‚4.toâ€‚correctâ€‚3-bitâ€‚errorï¼Œtheâ€‚hammingâ€‚distanceâ€‚needâ€‚toâ€‚beâ€‚7.â€‚Soâ€‚theâ€‚algorithmâ€‚fails.

æ±‰æ˜æ ¡éªŒç :

100ä¸ª, è‡³å°‘è¦ 7ä¸ªæ ¡éªŒç ,  2çš„7æ¬¡ > 107+1  . m+r+1  < 2çš„ræ¬¡

â€‚m:ä¿¡æ¯ä½â€‚â€‚â€‚â€‚â€‚â€‚r:æ£€éªŒä½â€‚â€‚â€‚â€‚â€‚m+r+1<=2^r

##### error detection codes

checksum æ ¡éªŒå’Œ 

Polynomial code or CRC (Cyclic Redundancy Check) ä¼šè€ƒ

https://asecuritysite.com/comms/crc_div?a=101110&b=1001 å¯ä»¥è®¡ç®—CRC

1 Gx æœ‰å‡ é˜¶å°±åŠ å‡ ä¸ª0 .  æ¯”å¦‚ 1101 é‚£ä¹ˆ r =3 . 

2  å¼‚æˆ– å–ä½™. ä½™æ•°å…±rä½. 

Data link protocols almost always put the CRC in a trailer rather than in a header. Why?



è€ƒç‚¹ï¼šè®¡ç®—æœºç½‘ç»œçš„**ä¸²è¡Œé€šä¿¡**
ç­”ï¼šä¸²è¡Œé€šä¿¡ï¼Œæ¥å—å®Œå¸§åå¯ç›´æ¥çœ‹æ ¡éªŒä½ï¼ŒèŠ‚çœå­˜å‚¨ï¼ŒåŠ é€Ÿï¼›å¦åˆ™è¦é¢å¤–å­˜å‚¨CRCä¸”æ•ˆç‡é™ä½



å¯ä»¥è€ƒbit rate.

utilization,  T frame/ (2 Tprop + Tframe)

### Elementary Data Link Protocols

**å‘é€æ–¹ä»¥é«˜äºæ¥æ”¶æ–¹èƒ½å¤„ç†å¸§çš„é€Ÿåº¦å‘é€å¸§ï¼Œå¯¼è‡´æ¥æ”¶æ–¹è¢«æ·¹æ²¡ï¼Œè¦é€šè¿‡åè®®é˜²æ­¢å®ƒ**

#### åœç­‰åè®®(stop-and-wait) 

> å‘é€æ–¹å‘é€ä¸€å¸§ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤åˆ°è¾¾åæ‰ç»§ç»­å‘é€ï¼Œæ­¤åè®®ä¸ºåœç­‰åè®® 

#### æ»‘åŠ¨çª—å£åè®®

ä»Protocol 4 åˆ°Protocol 6

Protocol 5: A protocol using go back N 

â€¢ Receive Window Size=1 â€¢ Send Window Size <= MAX_SEQ (0â€¦N) â€¢ Ex: max seqno=5, send window=6 is not allowed since seqno 0 can be assigned to both new pkt or old pkt (retransmission)

â€¢ Protocol 6: A protocol using selective repeat

ä¼šè€ƒæœ€å¤§çª—å£å¤§å°æ˜¯å¤šå°‘? 

Send Window Size <= (MAX_SEQ+1)/2

####  PPP

Point to Point Protocol æ˜¯é“¾è·¯å±‚çš„æ ‡å‡†ä¹‹ä¸€, å…¶ä»–æ ‡å‡†è¿˜æœ‰ HDLC å’ŒSLIP.     åŒ…æ‹¬ SONET fiber optic links and ADSL links

PPP æœ‰ä¸‰ä¸ª features .  A framing method ,â€“ A link control protocol (é“¾è·¯æ§åˆ¶åè®®, LCP)  a different NCP (Network Control Protocol, ç½‘ç»œæ§åˆ¶åè®®)



## lec7MACå±‚ 

#### CSMA with CD

æ˜¯CSMAåè®®çš„æ”¹è¿›æ–¹æ³•.   å…ˆå¬åå‘,è¾¹å¬è¾¹å‘,  å†²çªåœå‘, éšæœºé‡å‘(äºŒè¿›åˆ¶é€€é¿ç®—æ³•)

**Carrier Sense Multiple Access / Collision Detection**. è½½æ³¢ä¾¦å¬ å¤šè·¯è®¿é—® ç¢°æ’æ£€æµ‹  in the medium access control layer(MACå±‚). å®ƒä¾¦å¬ä¿¡é“æ˜¯å¦ç¹å¿™for broadcasting and interrupts the broadcast ç›´åˆ°ä¿¡é“ç©ºé—². In CSMA/CD collision is detected by broadcast sensing from the other stations. Upon collision detection in CSMA/CD, the transmission is stopped and a jam signal is sent by the stations and then the station waits for a random time context before retransmission. 

   å†²çªæ£€æµ‹, ç›‘å¬ 2taoçš„æ—¶é—´, ä¸ºäº†ä½¿ä¸€ä¸ªç«™è·å¾—æˆåŠŸä¼ è¾“çš„ä¸€äº›ä¿è¯ï¼Œäº‰ç”¨é—´éš”ï¼ˆè¯¥ç«™æ­£åœ¨ä¼ è¾“çš„æ—¶é—´ï¼‰åº”è¯¥è‡³å°‘æœ‰2 taoæ§½å®½åº¦ï¼Œå…¶ä¸­Î¹æ˜¯ä¿¡å·åœ¨ä¸¤ä¸ªæœ€è¿œçš„ç«™ä¹‹é—´ä¼ æ’­çš„æ—¶é—´ï¼Œå³å¿…é¡»æœ‰è¶³å¤Ÿçš„æ—¶é—´è®©å¸§çš„å‰ç«¯åˆ°è¾¾ç”µç¼†çš„æœ«ç«¯ï¼Œç„¶ååœ¨æ•´ä¸ªå¸§è¢«ä¼ è¾“ä¹‹å‰å°†é”™è¯¯ä¿¡æ¯é€å›èµ·ç‚¹ã€‚

å…ˆè§£é‡Šä¸€ä¸‹10 Base T. 10ä»£è¡¨ä»£è¡¨10Mb/sçš„æ•°æ®ç‡ï¼ŒBASEè¡¨ç¤ºè¿æ¥çº¿ä¸Šçš„ä¿¡å·æ˜¯åŸºå¸¦ä¿¡å·ï¼ŒTè¡¨ç¤ºåŒç»çº¿ã€‚ä¸”ä»¥å¤ªç½‘å‘é€çš„æ•°æ®éƒ½æ˜¯**æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ** çš„ä¿¡å·ã€‚æ›¼åˆ‡æ–¯ç‰¹ç¼–ç ï¼šä½å‘¨æœŸä¸­å¿ƒå‘ä¸Šè·³å˜è¡¨ç¤º0ï¼Œå‘ä¸‹è·³å˜è¡¨ç¤º1ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥å®šä¹‰ 

#### collision freeçš„åè®® 

1. A Bit-Map Protocol

2. Token passing ä¼ è¾“ä»¤ç‰Œ.  ä¼ åˆ°ä½ æœ‰å°±å‘, æ²¡æœ‰å°±ä¼ ç»™ä¸‹ä¸€ä¸ªäºº. æ•ˆç‡è¿˜æ˜¯æŒºé«˜çš„, ä½†æ˜¯å› ä¸ºä¸€äº›å•†ä¸šä¸Šçš„åŸå› ç°åœ¨ä¸æ€ä¹ˆç”¨äº†, 2021å¹´ 802.3 Ethernet å¸¸ç”¨, è¿˜æœ‰wifi.
3. Binary Countdown 

wireless LAN åè®®

Multiple Access Protocols: Limited-Contention protocols 

#### è‡ªé€‚åº”æ ‘æœç´¢åè®®

assign stations to slots dynamically

A æ˜¯root,  ç¬¬äºŒå±‚B C ç¬¬ä¸‰å±‚ DEFG  ç¬¬å››å±‚  HIJKLMNO  

Stations 2, 3, 5, 7, 11, and 13 want to send.
Viewing from node A, for slot #1: station 2, 3, 5, 7, 11, 13 will compete. Then,
viewing from node B, for slot #2: station 2, 3, 5, 7 will compete. Then,
viewing from node D, for slot #3: station 2, 3 will compete. Then,
viewing from node H, for slot #4: station 2 will compete and obtain the slot. Then,
viewing from node I, for slot #5: station 3 will compete and obtain the slot. Then,
viewing from node E, for slot #6: station 5, 7 will compete. Then,
viewing from node J, for slot #7: station 5 will compete and obtain the slot. Then,
viewing from node K, for slot #8: station 7 will compete and obtain the slot. Then,
viewing from node C, for slot #9: station 11, 13 will compete. Then,
viewing from node F, for slot #10:station 11 will compete and obtain the slot. Then,
viewing from node G, for slot #11:station 13 will compete and obtain the slot. 
Thus, 11 slots are needed

hidden station problem, exposed station problem.   éšè—ç»ˆç«¯,  æš´éœ²ç»ˆç«¯é—®é¢˜. 

#### 802.3: MAC Sublayer Protocol:

The Binary Exponential Backoff Algorithm  è¿™ä¸ªå¸¸è€ƒ 
Time is divided into discrete slots (51.2us).  
After the 1st collision, each station waits either 0 or 1 (k in 0~2-1) slot times before trying again.

After the 2nd collision, each station picks either 0,1,2,3 (k in 0~4-1) at random and waits that number of slot times.

After i-th collisions, each station picks either 0,1,2,â€¦, 2^ğ‘–âˆ’ 1 at random and waits that number of slot times.

After 10th collisions, the randomization interval is frozen at a maximum of 1023 slots. å›ºå®šåœ¨1023ä¸å†å˜ 

After 16 consecutive collisions, the controller reports failure back to the computer.   16æ¬¡å¤±è´¥å,ä¸¢å¼ƒæ•°æ®. 

 ç¬¬ä¸€æ¬¡ 0 åˆ°1  ç¬¬ä¸‰æ¬¡æ˜¯ 0 åˆ°7 æ˜¯è€ƒç‚¹

Please show the differences between (a) The Ethernet CSMA/CD protocol and the 802.11 CSMA/CA protocol
(b) The MACA protocol and the 802.11 CSMA/CA protocol

The MACA (Multiple Access with Collision Avoidance) protocol. A sending an RTS to B, B responding with a CTS to A 

#### CSMA/CA

åº”ç”¨åœ¨æ— çº¿å±€åŸŸç½‘, ç¢°æ’é¿å…, 

å·¥ä½œè¿‡ç¨‹
æ¥æ”¶æ–¹å’Œå‘é€æ–¹
å‘é€æ–¹å‘é€ä¸€ä¸ªRTSå¸§ç»™æ¥æ”¶æ–¹ï¼Œä»è€Œå‘èµ·å‘é€è¯·æ±‚ã€‚RTSå¸§åŒ…å«æ•´ä¸ªé€šè®¯è¿‡ç¨‹2éœ€è¦çš„æ—¶é—´NAVï¼Œ
æ¥æ”¶æ–¹æ¥æ”¶åˆ°RTSå¸§ï¼Œå¦‚æœåˆ¤æ–­æ­¤æ—¶ä¿¡é“å¯ä»¥ä¼ è¾“ï¼Œåˆ™å‘å‘é€æ–¹å‘é€ä¸€ä¸ªCTSå¸§è¿›è¡Œç¡®è®¤ã€‚CTSåŒæ ·åŒ…å«å‘é€æ–¹è¦å‘é€çš„æ•°æ®å¸§çš„é•¿åº¦ã€‚
æ¥æ”¶æ–¹æ¥æ”¶åˆ°CTSå¸§ï¼Œå¼€å§‹å‘é€æ•°æ®ã€‚
æ¥æ”¶æ–¹æ¥æ”¶å®Œæ•°æ®å¸§åï¼Œå‘å‘é€æ–¹è¿”å›ä¸€ä¸ªACKå¸§ç¡®è®¤ã€‚

ä¸¤ä¸ªåè®®éƒ½å¯ä»¥è§£å†³éšè”½ç«™é—®é¢˜ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºç¦»æ¥æ”¶æ–¹è¿‘çš„ç«™è¦ä¿æŒå®‰é™ã€‚è¿™ä¸ªé€šè¿‡CTSå°±å¯ä»¥å®ç°ï¼Œåªè¦æ¥æ”¶åˆ°CTSçš„å…¶ä»–ç«™ä¿æŒå®‰é™å°±å¯ä»¥äº†ã€‚
è€Œè§£å†³æš´éœ²ç«™é—®é¢˜çš„å…³é”®åœ¨äºï¼Œç¦»å‘é€æ–¹è¿‘çš„ç«™ç‚¹ä¸éœ€è¦ä¿æŒå®‰é™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦å¯¹RTSåšå‡ºä»»ä½•ååº”ï¼Œå°±åƒMACAæ‰€åšçš„è¿™æ ·ã€‚è€ŒCSMA/CAä¸­æ¥æ”¶åˆ°RTSå¸§çš„ç«™ç‚¹ä¹Ÿéœ€è¦ä¿æŒå®‰é™ï¼Œè¿™å°±å¯¼è‡´äº†æš´éœ²ç«™é—®é¢˜ã€‚
é‚£ä¹ˆå°±åˆ°äº†ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆCSMA/CAè¦è¿™æ ·åšå‘¢?  

æœ€å…³é”®çš„åŒºåˆ«åœ¨äºï¼ŒMACAæ˜¯ä¸€ä¸ªä¸å¯é çš„åè®®ï¼Œä»–åªç®¡å‘é€ï¼Œä¸ç®¡å‘é€å‡ºå»çš„ä¸œè¥¿æœ‰æ²¡æœ‰è¢«æ­£ç¡®æ¥æ”¶ã€‚è€ŒCSMA/CAå¢åŠ äº†ä¸€ä¸ªACKå¸§è¿›è¡Œç¡®è®¤ï¼Œæ˜¯å¯é çš„é€šè®¯åè®®ã€‚è€Œåœ¨è¿™æ®µæ—¶é—´é‡Œé¢ï¼Œå‘é€æ–¹åŒæ ·æœ‰å¯èƒ½æ¥å—æ•°æ®->ACKå¸§ã€‚ä¸ºäº†ä¿è¯å‘é€æ–¹èƒ½æ— å†²çªæ¥æ”¶åˆ°ACKï¼Œæ‰€æœ‰ç¦»å‘é€æ–¹è¿‘çš„ç«™ç‚¹åŒæ ·éœ€è¦ä¿æŒå®‰é™ã€‚æ‰€ä»¥æ‰€æœ‰ç«™ç‚¹æ— è®ºæ˜¯æ¥æ”¶åˆ°RTSè¿˜æ˜¯CTSéƒ½éœ€è¦ä¿æŒå®‰é™ä¸€æ®µæ—¶é—´ã€‚è¿™ä¹Ÿå¯¼è‡´CSMA/CAçš„æ•ˆç‡æ¯”è¾ƒä½ã€‚

## lec8ç½‘ç»œå±‚ä»‹ç»

I. Network Layer Design Issues 

II. Routing Algorithm

learning bridges

è‡ªå­¦ä¹ ,   ä»1 port æ”¶åˆ°Açš„æ¶ˆæ¯,  ç½‘æ¡¥å°±å­¦ä¹ åˆ°ä»¥åå‘ç»™A å°±ä»1port å‘å‡ºå». 

ä¸ºäº†å¢åŠ   reliability , redundant link may used.ä½†æ˜¯ä¼šæœ‰loopçš„é—®é¢˜ ,  æ‰€ä»¥éœ€è¦,  spanning Tree Bridges. ç”Ÿæˆæ ‘. 

#### virtual LANs

802.3   802.1Q

æå‡ºæ–°åè®®, å¾€å¾€åŠ äº†å­—æ®µ, 

III.Internetworking (ç½‘ç»œäº’è¿)

IV.The Network Layer in the Internet

ç½‘å…³ gateway

## lec9 ç½‘ç»œå±‚è¯¦è§£1

### 1 Network Layer Design Issues

1. Store-and-Forward Packet Switching (å­˜å‚¨è½¬å‘åˆ†ç»„äº¤æ¢) 
2. Services Provided to the Transport Layer (ä¸ºä¼ è¾“å±‚æä¾›çš„æœåŠ¡) 
3. Implementation of Connectionless Service (æ— è¿æ¥æœåŠ¡çš„å®ç°) 
4. Implementation of Connection-Oriented Service (é¢å‘è¿æ¥æœåŠ¡çš„å®ç°) 
5. Comparison of Virtual-Circuit and Datagram Subnets (è™šç”µè·¯æˆ–æ•°æ®æŠ¥å­ç½‘çš„æ¯”è¾ƒ)

Comparison of Virtual-Circuit and Datagram Subnet

Datagram Subnet éš¾ ä¿è¯æœåŠ¡è´¨é‡å’Œ æ‹¥å¡æ§åˆ¶.  æ‰€ä»¥ç”¨virtual-circuit

### 2 è·¯ç”±ç®—æ³•

é™æ€è·¯ç”±, æ‰‹å·¥é…ç½®

åŠ¨æ€è·¯ç”±, å¸¸è§çš„åˆ†ä¸º DV  å’ŒLS ä¸¤ç±».

1. The Optimality Principle (æœ€ä¼˜åŒ–åŸåˆ™) 

2. Shortest Path Routing (æœ€çŸ­è·¯å¾„è·¯ç”±) 
3. Flooding (æ³›æ´ªè·¯ç”±) 
4. Distance Vector (DV) Routing (è·ç¦»å‘é‡è·¯ç”±) 
5. Link State (LS) Routing (é“¾è·¯çŠ¶æ€è·¯ç”±) 
6. Hierarchical Routing (åˆ†å±‚è·¯ç”±) 
7. Broadcast Routing (å¹¿æ’­è·¯ç”±) 
8. Multicast Routing (ç»„æ’­è·¯ç”±) 
9. Anycast Routing (é€‰æ’­è·¯ç”±) 
10. Routing for Mobile Hosts (ç§»åŠ¨ä¸»æœºçš„è·¯ç”±) 
11. Routing in Ad Hoc Networks (è‡ªç»„ç»‡ç½‘ç»œçš„è·¯ç”±)

Routing Patterns and Techniques:

Unicast: point-to-point, one-to-one 

â€“ DV routing â€“ LS routing

 â€¢ Broadcast: one-to-all â€“ Flooding â€“ Reverse path forwarding

Multicast: one to many

 â€¢ Anycast: one to any åªè¦æ±‚one to è¿™å‡ ä¸ªäººä¸­å…¶ä¸­ä¸€ä¸ª, æ¯”å¦‚æœ€è¿‘çš„æˆ–è€…èµ„æºæœ€å¤šçš„. 

 â€¢ Collection: all-to-one â€“ Used in sensor network

#### optimality principle

 â€¢ Optimality principle (æœ€ä¼˜åŒ–åŸåˆ™): If router J is on the  optimal path from router I to router K (Iïƒ Jïƒ K), then the  optimal path from J to K also falls along the same route. 

â€¢ Sink tree (æ±‡é›†æ ‘): The set of optimal routes from all  sources to a given destination form a tree rooted at the  destination. (a) A subnet. (b) A sink tree for router B

#### flooding 

å ç”¨å¤§é‡èµ„æº,  æœ‰æ—¶å€™éœ€è¦. routerä¸èƒ½åˆ¤æ–­å­˜äº†çš„ipåœ°å€æ˜¯ä¸æ˜¯, åªè¦æ²¡å­˜å°±ä¼šflood. 

#### Distance vector routing  DV

 (è·ç¦»çŸ¢é‡è·¯ç”±, ä¹Ÿå« Bellman-Ford routing) è®¡ç½‘è€ƒç ”, æœŸæœ«è€ƒæ¯æ¬¡éƒ½ä¼šè€ƒ

æ‰€æœ‰èŠ‚ç‚¹å®šæœŸå°†ä»–ä»¬çš„æ•´ä¸ªè·¯ç”±é€‰æ‹©è¡¨ä¼ é€ç»™æ‰€æœ‰ä¸ä¹‹ç›´æ¥ç›¸é‚»çš„èŠ‚ç‚¹. 

Each router maintains a vector or table giving  â€¢ the best known distance to each destination and â€¢ which line to use to get there.  

â€“ These tables are updated by exchanging information  with the neighbors. To update the table, a node: â€¢ Measure its distance to its neighbors â€¢ Receive the vectors from its neighbors â€¢ Compute its own new vector.

distance vector æ€ä¹ˆåˆ›å»º?  æ€ä¹ˆæ›´æ–°? 

å…ˆæµ‹é‡å’Œé‚»å±…çš„è·ç¦», 

For an n-node network, how many elements in the  DV?  n-1ä¸ªentries.

æ›´æ–°äº†ä¹‹å, è¿™ä¸ªç»“ç‚¹å¹¿æ’­, ç„¶åå·¦è¾¹çš„ç»“ç‚¹ä¼šçŸ¥é“è¦é€‰å“ªä¸ªé‚»å±…. 

 ç¼ºç‚¹æ˜¯ä¼ bad news å¾ˆæ…¢. 

count-to-infinity åŸå› æ˜¯  ABC  B ä¸çŸ¥é“  A åˆ°C ç»è¿‡B , æ‰€ä»¥CæŒ‚äº†çš„æ—¶å€™B ä¼šè®¤ä¸ºåˆ°C çš„è·ç¦»ä¸º 1+ 2 =3. The core of the count-to-infinity problem is that if A tells B that it has a path  somewhere, there is no way for B to know  if the path has B as a part of it

Attempts to solve Count-to-infinity problem

Poisoned reverse æ¯’æ€§é€†è½¬, RFC :If C routes through B to get to A: â€“C tells B its distance to A is  infinite 

Poison Reverseçš„ç†å¿µæ˜¯å½“Router Aå‘ç°Network Xçš„ä¸­æ–­å¾Œ, åœ¨ä¸‹æ¬¡åšrouting updateæ—¶ä¸ä¼šå¿½ç•¥X, åè€Œä¼šæŠŠXåŒ…å«åˆ°routing updateå½“ä¸­, ä½†å°†å…¶è·³è·ƒæ•°Hop countå˜æ›´ä¸ºMaximum+1(RIPä¸º15+1), å› ä¸ºHop countè¶…è¿‡äº†Maximum, æ‰€ä»¥Router Bæ”¶åˆ°æ›´æ–°æ—¶ä¼šç«‹åˆ»çŸ¥é“Network Xä¸ºInaccessible, è€Œæ— éœ€ç­‰å¾…180ç§’, è¿™æ ·ä¾¿ä¼šå¤§å¤§åœ°åŠ å¿«ç½‘ç»œæ”¶æ•›çš„é€Ÿåº¦ã€‚

â€¢will this completely solve count-to-infinity problem? â€“No

##### RIP

RIPæ˜¯æœ€å¸¸è§çš„ DVç®—æ³•, é‡‡ç”¨è·³æ•°ä½œä¸ºè·ç¦»çš„åº¦é‡. 

#### Link state routing

Building link state packets. äº†è§£æ‰€æœ‰é‚»å±…çš„ipåœ°å€, æµ‹é‡delay. 

â€“ Each router builds a packet containing å®Œå…¨çš„ç½‘ç»œæ‹“æ‰‘ä¿¡æ¯. ç„¶åflooding å‘ç»™æ‰€æœ‰è·¯ç”±å™¨. 

â€“ The packet starts with the identity of the sender,  followed by a sequence number and age and a list of  neighbors (and costs to them)   ä¸ºäº†é¿å…å¾ªç¯, è¦ç”¨age , ageè®¾ç½®limit .   sequence numberå¯ä»¥æ£€æŸ¥é‡å¤å‘é€. 

æœ€å¸¸è§çš„æ˜¯ OSPF.  

##### Comparison of LS vs. DV

 link state å‘Šè¯‰å…¨ä¸–ç•Œ, message æ•°é‡å¤š,  robusteness better,     

DVæ˜¯å‘Šè¯‰ neighbors,ä¸ä¼šè½¬å‘

#### åˆ†å±‚ routing

åˆ†æˆå‡ ä¸ªregion . è®°å½•åˆ°æ¯ä¸ªregionçš„å°±å¯ä»¥äº†. 

å†…éƒ¨é‡‡ç”¨çš„å«IGP interior gateway protocol . æ¯”å¦‚RIP , OSPF å¤–éƒ¨çš„å«EGP, å…·ä½“çš„æœ‰BGP.

è¦ä¼šè®¡ç®—entries çš„æ•°é‡

æ¯”å¦‚  10 *9 * 8    æ¯ä¸ªrouter å°±éœ€è¦ 10 local+ 8 +7  =25ä¸ªtable entries

è·¯ç”±äº¤ä»˜, åœ¨ä¸€ä¸ªç½‘æ®µå°±ç›´æ¥äº¤ä»˜. å¦åˆ™å°±é—´æ¥äº¤ä»˜.  æ€ä¹ˆåˆ¤æ–­?  å­ç½‘æ©ç "ä¸"æ“ä½œ. 

#### å¹¿æ’­

Unicast: point-to-point, one-to-one æ¯”å¦‚ DV routing , LS routing

å¹¿æ’­ one-to-all å‘ä¸»æœºå·å…¨1 

Sink-tree based broadcast  

Optimal in terms of # of transmissions is minimum  æœ€å°‘ä¼ è¾“æ¬¡æ•°

Does this optimal broadcasting possible in a network only with DV routing?  no .  ä¸èƒ½æ”¯æŒsink-treeçš„ broadcast æœ€ä¼˜. 

reverse path forwarding   æ‰èƒ½è¾¾åˆ°æœ€ä¼˜

##### reverse path forwarding

When a broadcast packet arrives at a router, the router checks to see if the packet arrived on the line that is normally used for sending packets to the source of the packets. çœ‹æ˜¯ä¸æ˜¯å¸¸ç”¨çš„è·¯.

å¦‚æœæˆ‘è§è¿‡ M åˆ°I çš„è·¯å¾„, é‚£å°±æ˜¯æœ€çŸ­è·¯, é‚£å°±M continues . å¦åˆ™ stops.

#### Multicast

 one to many, ç»„æ’­ä¸€å®šæ˜¯UDP, åŒæ—¶é€ç»™å¤šä¸ªæ¥æ”¶è€…. ä¸€æ¬¡å‘é€, åœ¨ä¼ é€è·¯å¾„åˆ†å‰æ—¶ æŠŠåˆ†ç»„å¤åˆ¶åè½¬å‘.  è¿™éœ€è¦è·¯ç”±å™¨çš„æ”¯æŒ. 

#### Anycast

one to any

 a packet is delivered to the nearest member of a group. Schemes that find these paths are called anycast routing. 
â€¢ Example usage: DNS æ‰¾æœ€è¿‘çš„

Routing Algorithms: Routing in Ad Hoc Networks

ad hoc

### 3 INTERNETWORKING 

â€¢ How Networks Differ 

â€¢ How Networks Can Be Connected 

â€¢ Tunneling 

â€¢ Internetwork Routing 

â€¢ Packet Fragmentation

## lec10  ç½‘ç»œå±‚2

###  IV.The Network Layer in the Internet

åˆ†ç»„å¯ä»¥å‘é€åŒæ—¶æ¥æ”¶ï¼Œ å‡å°‘æ€»æ—¶é—´ã€‚

#### IPv4 åè®®

Total length: the length of header and data. The maximum is  65,535 bytes.

â€¢ DF: Don't Fragment â€¢ MF: More Fragment. The flag is set for all fragments except the last
â€¢ Fragment offset: fragment belongs
to tell where in the current datagram this
â€¢ Time to Live: a counter used to limit packet lifetimes. 

â€¢ Protocol: which transport process to give this datagram to. (http://www.iana.org/assignments/protocol-numbers)
â€¢ Header checksum: to verify the header only â€¢ Source and destination address: to indicate the network number and host number.

head å‰ä¸€éƒ¨åˆ†20å­—èŠ‚æ˜¯å›ºå®šé•¿åº¦, åé¢æ˜¯å¯é€‰å­—æ®µ. 

headerä¸€èˆ¬é•¿ 5ä¸ªwords . ä¸€ä¸ªwords 4ä¸ªå­—èŠ‚ .

Classless Inter-Domain Routingï¼ŒCIDRå¯ä»¥å°†è·¯ç”±é›†ä¸­èµ·æ¥ï¼Œåœ¨è·¯ç”±è¡¨ä¸­æ›´çµæ´»åœ°å®šä¹‰åœ°å€ã€‚å®ƒä¸åŒºåˆ† A ç±»ã€B ç±»ã€C ç±»åœ°å€ï¼Œè€Œæ˜¯ä½¿ç”¨ CIDR å‰ç¼€çš„å€¼æŒ‡å®šåœ°å€ä¸­ä½œä¸ºç½‘ç»œ ID çš„ä½æ•°ã€‚ 

longest matching prefix  æœ€é•¿åŒ¹é…å‰ç¼€. æœ‰ä¸¤ä¸ªè·¯ç”±å¯ä»¥åŒ¹é…çš„æ—¶å€™å°±é€‰é•¿çš„é‚£ä¸ª. 

èšåˆ

NAT å®ç°å†…éƒ¨ipåˆ°å¤–éƒ¨ipçš„ç¿»è¯‘, ç¼“è§£ipv4 åœ°å€ç´§ç¼ºçš„æƒ…å†µ, NAT æœ‰å¤§é‡äº‰è®®.  æ‰“ç ´äº†ipv4æ¶æ„, å¾ˆå¤šå†…ç½‘ä¸€ä¸ªipä¸ä¸€å®šå¯¹åº”ä¸€ä¸ªåœ°å€. 

NAT: reserved private IPs  ä¼šè€ƒ

â€¢ 10.0.0.0/8 â€“ 10.0.0.0 ~ 10.255.255.255, 16,777,216 hosts 

â€¢ 172.16.0.0/12 â€“ 172.16.0.0 ~ 172.31.255.255, 1,048,576 hosts 

â€¢192.168.0.0/16 â€“ 192.168.0.0 ~ 192.168.255.255, 65,536 hosts

ä¸€ä¸ªé“¾è·¯å±‚æ•°æ®æŠ¥æœ€å¤§æ•°æ®é‡ å«åšæœ€å¤§ä¼ é€å•å…ƒMTU. ä»¥å¤ªç½‘MTU  ä¸º1500å­—èŠ‚,  ipæ•°æ®æŠ¥è¿‡é•¿, å°±è¦åˆ†è£…åœ¨å¤šä¸ªæ•°æ®æŠ¥ä¸­.   è¿™äº›å«åšç‰‡fragment

å°æµ‹æ˜¯è¯»ä¸€ä¸ª public ipåœ°å€. 

è¯»æˆªè·çš„  åå…­è¿›åˆ¶  packet , ç„¶åé—®

P2 çš„ttlæ˜¯49

How many routers passed before p6 arrived to host A ?

p1 to p4 , which is not sent by host A ?

public IP of B is ? public IP of A is ?

If p7 will be fragmented into fragments MTU 800 ,  

first fragment: length 1 MF 2 offset 3

second fragment: length  MF  offset 

48bit ä½ç”¨ 49 æ˜¯DF , 50æ˜¯ MF   DF(don't fragment)=0æ—¶æ‰å¯ä»¥è¢«åˆ†ç‰‡, MF(more fragment)=0 è¯´æ˜æ˜¯æœ€åä¸€ç‰‡.  

åˆ©ç”¨ttl å­—æ®µç ”ç©¶ç»è¿‡äº†å¤šå°‘ä¸ªè·¯ç”±, ä¸€å¼€å§‹ 64 åæ¥. 

ç»è¿‡äº†15ç«™

å“ªä¸ªä¸æ˜¯ä»–å‘çš„? 

å“ªä¸ª total length å°äº46?

public åœ°å€

å¤§äº800å­—èŠ‚,æ‹†æˆä¸¤ä¸ªfragment.

ç¬¬ä¸€ä¸ªæ˜¯796 ,  

ç¬¬äºŒä¸ªæ˜¯ 760 , ä¸€å…±æ˜¯ 1516,  ç¬¬ä¸€ä¸ªfra å‘äº†796 ,      740çš„æ•°æ® +20 = 760

The IPv4 Protocol: Header fields

Differentiated service:  â€“ Type of service (past): 3 for priority, 3 for Delay,  Throughput, and Reliability, and 2 unused.  

â€“ Differentiated services (now): 6 for service class, 2 for  congestion (e.g. ECN).

IPV6å¯¹æ™ºèƒ½ç‰©ä»¶æœ‰å‹ç¼©, å› ä¸ºenergyä¸å¤Ÿ .

[ä»¤ç‰Œæ¡¶ç®—æ³•](https://baike.baidu.com/item/ä»¤ç‰Œæ¡¶ç®—æ³•)æ˜¯[ç½‘ç»œæµé‡](https://baike.baidu.com/item/ç½‘ç»œæµé‡)æ•´å½¢ï¼ˆTraffic Shapingï¼‰å’Œé€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰ä¸­æœ€å¸¸ä½¿ç”¨çš„ä¸€ç§ç®—æ³•ã€‚å…¸å‹æƒ…å†µä¸‹ï¼Œ[ä»¤ç‰Œæ¡¶ç®—æ³•](https://baike.baidu.com/item/ä»¤ç‰Œæ¡¶ç®—æ³•)ç”¨æ¥æ§åˆ¶å‘é€åˆ°ç½‘ç»œä¸Šçš„æ•°æ®çš„æ•°ç›®ï¼Œå¹¶å…è®¸çªå‘æ•°æ®çš„å‘é€ã€‚

ä»¤ç‰Œæ¡¶è¿™ç§æ§åˆ¶æœºåˆ¶åŸºäºä»¤ç‰Œæ¡¶ä¸­æ˜¯å¦å­˜åœ¨ä»¤ç‰Œæ¥æŒ‡ç¤ºä»€ä¹ˆæ—¶å€™å¯ä»¥å‘é€æµé‡ã€‚ä»¤ç‰Œæ¡¶ä¸­çš„æ¯ä¸€ä¸ªä»¤ç‰Œéƒ½ä»£è¡¨ä¸€ä¸ªå­—èŠ‚(å¯¹äºæµé‡æ•´å½¢æ¥è¯´ä»£è¡¨ä¸€ä¸ªbitï¼Œå°±traffic policingæ¥è®²ä»£è¡¨ä¸€ä¸ªbyteã€‚å‚è§CCIE Routing and Switching Official Exam Certification Guide 2nd Editionï¼‰ã€‚å¦‚æœä»¤ç‰Œæ¡¶ä¸­å­˜åœ¨ä»¤ç‰Œï¼Œåˆ™å…è®¸å‘é€æµé‡ï¼›è€Œå¦‚æœä»¤ç‰Œæ¡¶ä¸­ä¸å­˜åœ¨ä»¤ç‰Œï¼Œåˆ™ä¸å…è®¸å‘é€æµé‡ã€‚å› æ­¤ï¼Œå¦‚æœçªå‘é—¨é™è¢«åˆç†åœ°é…ç½®å¹¶ä¸”ä»¤ç‰Œæ¡¶ä¸­æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œï¼Œé‚£ä¹ˆæµé‡å°±å¯ä»¥ä»¥å³°å€¼é€Ÿç‡å‘é€ã€‚ 

#### ipv6

IPv6 åœ°å€ç”± 8 ç»„ 16 è¿›åˆ¶çš„æ•°å­—æ¥è¡¨ç¤ºï¼Œæ¯ç»„è¡¨ç¤º 16 æ¯”ç‰¹ã€‚è¿™äº›ç»„æ•°å­—é€šè¿‡ (":")åˆ†å‰²ã€‚æ¯”å¦‚,  2001:0db8:85a3:0000:0000:8a2e:0370:7334 æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€ã€‚

æ³¨æ„å‰é¢0çœç•¥è¦ç”¨ä¸¤ä¸ªå†’å·ï¼šï¼š 



## lec11 ç½‘ç»œå±‚3

##### æ§åˆ¶æ¶ˆæ¯åè®® ICMP

Internet Control Message Protocol ICMP æ˜¯è·¯ç”±å™¨ç›‘è§† Internet çš„åè®®ï¼Œå½“è·¯ç”±å™¨å¤„ç†æ•°æ®åŒ…çš„æ—¶å€™å‘ç”Ÿäº†ä»¥å¤–ï¼Œå°±å¯ä»¥ç”¨ ICMP å‘æ•°æ®åŒ…çš„æºç«¯æŠ¥å‘Šæœ‰å…³çš„äº‹ä»¶ï¼Œæ‰€æœ‰çš„ ICMP éƒ½è¢«å°è£…åœ¨ä¸€ä¸ª IP æ•°æ®åŒ…é‡Œ.  åˆ†ä¸ºå·®é”™æŠ¥å‘Š å’Œè¯¢é—®æŠ¥æ–‡ä¸¤ç§.  å·®é”™æŠ¥å‘Šæœ‰5ç§,  ç»ˆç‚¹ä¸å¯è¾¾,  æºç‚¹æŠ‘åˆ¶, è¶…æ—¶, å‚æ•°é—®é¢˜å’Œé‡å®šå‘(æ”¹å˜è·¯ç”±).  pingä½¿ç”¨äº† ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡.  traceroute ä½¿ç”¨äº†ICMP æ—¶é—´è¶…è¿‡æŠ¥æ–‡.  

##### åœ°å€è§£æåè®® ARP

 ä»¥å¤ªç½‘çš„ç½‘å¡å¹¶ä¸èƒ½ç†è§£ IP åœ°å€ï¼Œæ¯ä¸€å— NIC æ ¹æ® 48 ä½çš„ä»¥å¤ªç½‘åœ°å€æ¥å‘é€å’Œæ¥æ”¶å¸§ï¼ŒARP åè®®çš„ä½œç”¨å°±æ˜¯å°† IP åœ°å€æ˜ å°„æˆä»¥å¤ªç½‘çš„åœ°å€ï¼Œä¼˜ç‚¹åœ¨äºç®€å•ï¼Œæ—¢å¯ä»¥ç®—ä½œç½‘ç»œå±‚çš„åè®®ï¼Œä¹Ÿå¯ä»¥ç®—ä½œæ•°æ®é“¾ è·¯å±‚çš„åè®®ã€‚ ARP åè®®è§£å†³è½¬æ¢é—®é¢˜çš„æ–¹æ³•æ˜¯åœ¨ä¸»æœºçš„ ARP é«˜é€Ÿç¼“å­˜ä¸­å­˜æ”¾ä¸€ä¸ª IP åœ°å€åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„è¡¨ï¼Œå¹¶è¿›è¡ŒåŠ¨æ€çš„æ›´æ–°ï¼Œæ¯ä¸€å°ä¸»æœºä¸Šéƒ½è®¾æœ‰ä¸€ä¸ª SRP é«˜é€Ÿç¼“å­˜ï¼Œé‡Œé¢æœ‰æœ¬å±€åŸŸç½‘ä¸Šçš„å„å°ä¸»æœºå’Œè·¯ç”±å™¨çš„ IP åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„è¡¨ã€‚ å½“ä¸€å°ä¸»æœº A è¦æƒ³æœ¬å±€åŸŸç½‘ä¸Šçš„ä¸»æœº B å‘é€ IP æ•°æ®æŠ¥çš„æ—¶å€™å°±ä¼šå…ˆåœ¨ç¼“å­˜ä¸­æŸ¥çœ‹æŸ¥å‡ºå¯¹åº”çš„ç¡¬ä»¶åœ°å€ç„¶åå†™å…¥ MAC å¸§ä¸­è¿›è¡Œå‘é€ï¼Œå¦åˆ™éœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„å¤æ‚æ“ä½œã€‚ RARPå°±æ˜¯reverse ARP

##### DHCP

dynamic host configuration protocol.  è¿™æ˜¯åº”ç”¨å±‚åè®®, åŸºäºUDP. æ¯ä¸ªç½‘ç»œå¿…é¡»æœ‰ä¸€ä¸ª DHCP æœåŠ¡å™¨è´Ÿè´£åœ°å€çš„é…ç½®ï¼Œä¸ºå‘é€è¯·æ±‚çš„ä¸»æœºåˆ†é…ä¸€ä¸ªç©ºé—²çš„ IP åœ°å€ï¼Œå¹¶é€šè¿‡ DHCP çš„ OFFER åŒ…è¿”å›ç»™ä¸»æœºã€‚ä½†æ˜¯åŠ¨æ€åˆ†é…çš„ IP åœ°å€åªèƒ½æŒç»­ä¸€æ®µæ—¶é—´ï¼Œåˆ°æœŸä¹‹å‰ä¸»æœºå¿…é¡»è¯·æ±‚ DHCP ç»­è®¢ï¼Œå¦åˆ™æ—¶é—´åˆ°äº†ä¹‹åä¸»æœºçš„ IP åœ°å€å°±ä¼šè¢«å–æ¶ˆã€‚ æ­£å¸¸æƒ…å†µæ˜¯ä»å°åˆ°å¤§åˆ†é…. 

##### æ ‡ç­¾äº¤æ¢å’Œ MPLS

å¤šåè®®æ ‡ç­¾äº¤æ¢ (MPLS) æ˜¯æŒ‡åœ¨æ¯ä¸ªæ•°æ®åŒ…å‰é¢å¢åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œè·¯ç”±å™¨æ ¹æ®æ•°æ®åŒ…æ ‡ç­¾è¿›è¡Œè½¬å‘ï¼Œç”¨ æ ‡ç­¾ä½œä¸ºå†…éƒ¨è¡¨çš„ä¸€ä¸ªç´¢å¼•ï¼Œå¿«é€ŸæŸ¥æ‰¾å‡ºæ­£ç¡®çš„è¾“å‡ºè·¯çº¿ã€‚é€šç”¨çš„ MPLS æœ‰ 4 ä¸ªå­—èŠ‚ï¼ŒåŒ…å« 4 ä¸ªå­—æ®µï¼Œæ ‡ç­¾å­˜æ”¾çš„æ˜¯ç´¢å¼•ï¼ŒQoS è¡¨æ˜æœåŠ¡ç±»åˆ«ï¼ŒS è¡¨ç¤ºåœ¨å±‚æ¬¡ç½‘ç»œä¸­å åŠ å¤šä¸ªæ ‡ç­¾çš„åšæ³•ï¼ŒTTL å­—æ®µæŒ‡å‡ºè¯¥æ•°æ®åŒ… è¿˜å¯ä»¥è¢«è½¬å‘å¤šå°‘æ¬¡ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ TTL å‡å° 1ï¼Œå˜æˆ 0 çš„æ—¶å€™æ•°æ®åŒ…å°±ä¼šè¢«ä¸¢å¼ƒ

#### å†…éƒ¨ç½‘å…³è·¯ç”±åè®®

##### è·¯ç”±ä¿¡æ¯åè®® RIP

Routing Information Protocol æ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„åŸºäºè·ç¦»å‘é‡çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œæ¯”è¾ƒç®€å•ï¼Œè§„å®šæ¯ä¸ªè·¯ç”±å™¨éƒ½è¦ç»´æŠ¤è·ç¦»å‘é‡ï¼Œè€Œè·ç¦»ä¹Ÿç§°ä¸ºè·³æ•°ï¼Œè§„å®šä»ä¸€ä¸ªè·¯ç”±å™¨åˆ°ç›´æ¥è¿æ¥ç½‘ç»œçš„è·³æ•°ä¸º 1ï¼Œ RIP è®¤ä¸ºæœ€ä½³è·¯ç”±å°±æ˜¯é€šè¿‡çš„è·¯ç”±å™¨çš„æ•°ç›®å°‘ï¼Œå³ RIP ä¼šä¼˜å…ˆé€‰æ‹©è·³æ•°è¾ƒå°‘çš„è·¯å¾„ï¼Œä¸€æ¡è·¯å¾„æœ€å¤šåªèƒ½åŒ…å« 15 ä¸ªè·¯ç”±å™¨( è¿™ä¸ªè¦èƒŒè¯µ 16å°±æ˜¯infinite , å®é™…ä¸Šç°åœ¨æ˜¯è¿œè¿œä¸å¤Ÿçš„. )ï¼Œé»˜è®¤åœ¨æ¯ 30s å¹¿æ’­ä¸€æ¬¡æ›´æ–°ä¿¡æ¯(è¿™ä¸ªä¸ç”¨èƒŒè¯µ.  )ï¼Œå¹¶ä¸”åŠ¨æ€ç»´æŠ¤è·¯ç”±è¡¨ã€‚ ç›¸æ¯”äº OSPFï¼ŒRIP åªå’Œç›¸é‚»çš„è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯ï¼Œè¿™ä¸ªä¿¡æ¯ä¹Ÿå°±æ˜¯è·¯ç”±è¡¨ï¼Œå¹¶ä¸”æœ‰å›ºå®šçš„æ—¶é—´é—´éš”ã€‚

**split-horizon with poisoned reverse**

ä½†æ˜¯èƒ½æ”¶åˆ°å“ªæ€•æ˜¯åæ¶ˆæ¯æ€»æ˜¯æ¯”æ”¶ä¸åˆ°æ¶ˆæ¯è¦å¥½å¾—å¤šã€‚æˆ‘ä»¬å¯ä»¥ç”¨å¸¦æ¯’æ€§é€†è½¬çš„æ°´å¹³åˆ†å‰²æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

192.168.0.0è¿™ä¸ªç½‘æ®µçš„è·³æ•°å´æ˜¯16è·³ï¼Œä¹Ÿå°±æ˜¯æ— ç©·å¤§ï¼æ‰€ä»¥æ— è®ºæ€æ ·ï¼ŒR3éƒ½ä¸ä¼šå°†è¿™ä¸ªæ¡ç›®ç½®å…¥è‡ªå·²çš„è·¯ç”±è¡¨å†…ã€‚ä¹Ÿå°±ä¿è¯äº†è·¯ç”±ä¿¡æ¯çš„å¯é æ€§ã€‚

##### å¼€æ”¾æœ€çŸ­è·¯å¾„åè®® OSPF

OSPF çš„å…¨ç§°æ˜¯å¼€æ”¾æœ€çŸ­è·¯å¾„åè®® (Open Shortest Path First)ï¼Œå€Ÿé‰´äº† IS-IS(ä¸­é—´ç³»ç»Ÿåˆ°ä¸­é—´ç³»ç»Ÿ) åè®®ï¼Œå·²ç»æˆä¸ºäº†ISOçš„æ ‡å‡†ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š 

â€¢ ä½¿ç”¨äº†åˆ†å¸ƒå¼çš„é“¾è·¯çŠ¶æ€åè®®å’Œæœ€çŸ­è·¯å¾„ç®—æ³• 

â€¢ æ˜¯ä¸€ç§åŠ¨æ€çš„ç®—æ³•ï¼Œæ”¯æŒå¤šç§è·ç¦»åº¦é‡ 

â€¢ å®ç°äº†å‡è¡¡è´Ÿè½½ï¼Œä½¿ç”¨å±‚æ¬¡åŒ–çš„ç½‘ç»œç³»ç»Ÿ 

â€¢ åŒæ—¶æ”¯æŒç‚¹åˆ°ç‚¹çš„é“¾è·¯å’Œå¹¿æ’­ç½‘ç»œ OSPF å°†è‡ªæ²»ç³»ç»Ÿåˆ’åˆ†æˆäº†è‹¥å¹²ä¸ª areaï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç½‘ç»œï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿæœ‰ä¸€ä¸ªéª¨å¹²åŒºåŸŸ backboneã€‚ è·¯ç”±å™¨ä¹Ÿåˆ†ä¸ºåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨å’Œå†…éƒ¨è·¯ç”±å™¨ã€è‡ªæ²»ç³»ç»Ÿè¾¹ç•Œè·¯ç”±å™¨å’Œéª¨å¹²è·¯ç”±å™¨ç­‰ç­‰ï¼Œå…¶ä¸­è‡ªæ²»ç³»ç»Ÿè¾¹ç•Œè·¯ç”±å™¨å¯ä»¥æŠŠé€šå¾€å…¶ä»–è‡ªæ²»ç³»ç»Ÿçš„å¤–éƒ¨è·¯ç”±æ³¨å…¥åˆ°æœ¬åŒºåŸŸä¸­ã€‚ OSPF çš„å·¥ä½œæ–¹å¼æœ¬è´¨ä¸Šæ˜¯å¯¹ä¸€å¼ å›¾è¿›è¡Œæ“ä½œï¼Œå°†ä¸€ç»„å®é™…ç½‘ç»œã€è·¯ç”±å™¨å’Œçº¿è·¯æŠ½è±¡åˆ°ä¸€ä¸ªæœ‰å‘å›¾ä¸­ï¼Œ
è·¯ç”±å™¨ä¹‹é—´çš„è¿æ¥å¯ä»¥ç”¨ä¸¤æ¡æœ‰å‘çš„å¼§æ¥è¡¨ç¤ºï¼ŒOSPF ä¼šè®°ä½æœ€çŸ­çš„è·¯å¾„é›†åˆï¼Œå¹¶åœ¨æŠ¥æ–‡è½¬å‘é˜¶æ®µæŠŠæµé‡ åˆ†æ‘Šåˆ°å¤šæ¡è·¯å¾„ä¸Šé¢ï¼Œå®ç°è´Ÿè½½å‡è¡¡ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºç­‰ä»·æˆæœ¬å¤šè·¯å¾„ (ECMP) 

OSPF çš„æ¶ˆæ¯ç±»å‹æœ‰äº”ç§ï¼Œåœ¨é‚»æ¥çš„è·¯ç”±å™¨ä¹‹é—´è¿›è¡Œä¼ é€’ï¼Œåˆ†åˆ«æ˜¯ï¼š
â€¢ é—®å€™åˆ†ç»„ï¼Œç”¨æ¥å‘ç°å’Œç»´æŒé‚»å±…çš„å¯è¾¾æ€§ â€¢ æ•°æ®åº“æè¿°åˆ†ç»„ï¼Œç»™å‡ºè‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­æ‰€æœ‰ä¿¡æ¯ â€¢ é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„ï¼Œå‘å¯¹æ–¹è¯·æ±‚é˜¿æ¾æŸäº›é“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ â€¢ é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„ï¼Œç”¨ flood æ›´æ–°å…¨ç½‘çš„é“¾è·¯çŠ¶æ€ â€¢ é“¾è·¯çŠ¶æ€ç¡®è®¤åˆ†ç»„ï¼Œå¯¹é“¾è·¯æ›´æ–°åˆ†ç»„çš„ç¡®è®¤

OSPFæ˜¯ å†…éƒ¨ç½‘å…³åè®®. 

DV  distance vector åè®® :  RIP   routing information åè®®.  

LS  link state åè®® :    OSPF  open shortest path first . 

ç”¨å¸¦å®½æ¥åˆ¤æ–­è·¯å¾„çš„ä¼˜åŠ£å¼¥è¡¥äº†RIPçš„ç¼ºé™·ï¼ˆå…‰å‡­å¸¦å®½ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼‰ï¼Œå¯ä»¥æ›´å¥½çš„æ§åˆ¶ç®¡ç†å’Œæ‰©å±•ç½‘ç»œã€‚è¿˜æœ‰å„ç§å°ç‰¹ç‚¹æ¯”å¦‚DRã€BDRæœºåˆ¶ï¼Œå’Œé€‚åˆä¸åŒç½‘ç»œç±»å‹æœºåˆ¶ï¼Œä»¥åŠä½¿ç”¨ä¸åŒLSAä¼ é€’å„ç§ä¿¡æ¯ï¼Œå„ç§LSAçš„ç‰¹æ€§ä¹Ÿä¸é€šã€‚æ‰€æœ‰ç»¼åˆæ¥è®²OSPFæ˜¯æ¯”è¾ƒé€‚åˆå¤§ä¼—é€‰æ‹©çš„ä¸€æ¬¾è·¯ç”±åè®®ã€‚

#### å¤–éƒ¨ç½‘å…³è·¯ç”±åè®® BGP

 BGP çš„å…¨ç§°æ˜¯è¾¹ç•Œç½‘å…³åè®® Border Gateway Protocolï¼Œåœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿçš„å†…éƒ¨æ¨èä½¿ç”¨ OSPF å’Œ
ISISï¼Œè€Œåœ¨è‡ªæ²»ç³»ç»Ÿä¹‹é—´ç”¨ BGP æ¯”è¾ƒå¥½ï¼Œè¿™æ˜¯å› ä¸ºåŸŸå†…åè®®å’ŒåŸŸé—´åè®®çš„ç›®æ ‡ä¸åŒï¼ŒåŸŸå†…åè®®æ‰€éœ€è¦åšçš„ åªæ˜¯å°½å¯èƒ½æœ‰æ•ˆåœ°å°†æ•°æ®åŒ…ä»æºç«¯å‘é€åˆ°æ¥æ”¶æ–¹ï¼Œè€ŒåŸŸé—´çš„è·¯ç”±åè®®åˆ™å¿…é¡»è¦è€ƒè™‘å¤§é‡çš„é€‰æ‹©ç­–ç•¥ï¼Œæ¯”å¦‚æ˜¯ å¦æ¥æ”¶æŸä¸ªç‰¹å®šè‡ªæ²»ç³»ç»Ÿçš„æ¶ˆæ¯ç­‰ç­‰ã€‚ 

BGP åè®®åªèƒ½åŠ›æ±‚å¯»æ‰¾åˆ°ä¸€æ¡å¯ä»¥è¾¾åˆ°ç›®çš„ç½‘ç»œå¹¶ä¸”æ¯”è¾ƒå¥½çš„è·¯ç”±ï¼Œé‡‡ç”¨äº†è·¯å¾„å‘é‡è·¯ç”± é€‰æ‹©åè®® ç”¨äºäº’è”ç½‘ï¼ˆInternetï¼‰ã€‚å®ƒçš„åœ°ä½æ˜¯æ ¸å¿ƒçš„ï¼ˆç›®å‰æ˜¯æœ€é‡è¦çš„ï¼Œäº’è”ç½‘ä¸Šå”¯ä¸€ä½¿ç”¨çš„è·¯ç”±åè®®ï¼‰å®ƒçš„ç›®çš„æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œä»¥è¾¾åˆ°å„ä¸ªç½‘ç»œè‡ªæ²».BGPä¸€èˆ¬ç”¨äºä¼ä¸šå’Œä¼ä¸šä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯è¿è¥å•†éª¨å¹²ç½‘çš„é€šä¿¡ï¼Œä¸€èˆ¬ä½¿ç”¨åœ¨ASå†…æˆ–è€…ASé—´é€šä¿¡ï¼ˆè¿™é‡Œæœ‰ä¸ªASçš„æ¦‚å¿µï¼‰ï¼ŒBGPæ³¨é‡çš„æ˜¯æ•°æ®ä¼ é€’çš„æ–¹å¼ä»¥åŠå¦‚ä½•æ§åˆ¶æ•°æ®çš„èµ°å‘ï¼Œè·¯ç”±ç­–ç•¥çš„å®è¡Œï¼Œè€Œå¯¹[æ”¶æ•›é€Ÿåº¦](https://www.zhihu.com/search?q=æ”¶æ•›é€Ÿåº¦&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A"1690062194"})å’Œæœ€ä¼˜è·¯å¾„æ²¡æœ‰å¤ªå¤šçš„æŠ•å…¥ã€‚ä¸€èˆ¬ä½¿ç”¨BGPæ›´å¤šçš„æ˜¯å’Œè¿è¥å•†å‚ä¸çš„MPLSä¸“çº¿ç»“åˆä½¿ç”¨ï¼Œåœ¨å¤§å‹ä¼ä¸šç½‘ä¸­å®ç°çš„æ¯”è¾ƒå¤šã€‚

 BGP ä½¿ç”¨å››ç§æŠ¥æ–‡ï¼Œåˆ†åˆ«æ˜¯æ‰“å¼€ï¼Œæ›´æ–°ï¼Œä¿æ´»å’Œé€šçŸ¥

RIPã€OSPFã€BGP ä¸‰ç§åè®®çš„åŒºåˆ«æœ‰ï¼š
â€¢ RIP ä½¿ç”¨è·ç¦»å‘é‡ç®—æ³•ï¼Œä¼ é€’ UDP åè®®ï¼Œé€‰æ‹©è·³æ•°æœ€å°‘çš„è·¯å¾„ â€¢ OSPF ä½¿ç”¨é“¾è·¯çŠ¶æ€ç®—æ³•ï¼Œä¼ é€’ IP åè®®ï¼Œé€‰æ‹©ä»£ä»·æœ€ä½çš„è·¯å¾„ â€¢ BGP ä½¿ç”¨è·¯å¾„å‘é‡ç®—æ³•ï¼Œä¼ é€’ TCP åè®®ï¼Œé€‰æ‹©æ¯”è¾ƒå¥½çš„è·¯å¾„

inter AS :  RIP, OSPF    å¯ä»¥åªå…³å¿ƒperformance

Inter AS routing : BGP  è¿˜è¦è€ƒè™‘åˆ«çš„å› ç´ .

ASï¼ˆAutonomous systemï¼‰ï¼šè‡ªæ²»ç³»ç»Ÿï¼ŒæŒ‡åœ¨ä¸€ä¸ªï¼ˆæœ‰æ—¶æ˜¯å¤šä¸ªï¼‰ç»„ç»‡ç®¡è¾–ä¸‹çš„æ‰€æœ‰IPç½‘ç»œå’Œè·¯ç”±å™¨çš„å…¨ä½“ï¼Œå®ƒä»¬å¯¹äº’è”ç½‘æ‰§è¡Œå…±åŒçš„è·¯ç”±ç­–ç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºäº’è”ç½‘æ¥è¯´ï¼Œä¸€ä¸ªASæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•´ä½“ç½‘ç»œã€‚è€ŒBGPå®ç°çš„ç½‘ç»œè‡ªæ²»ä¹Ÿæ˜¯æŒ‡å„ä¸ªASè‡ªæ²»ã€‚æ¯ä¸ªASæœ‰è‡ªå·±å”¯ä¸€çš„ç¼–å·ã€‚

IGPï¼ˆInterior Gateway Protocolï¼‰ï¼š[å†…éƒ¨ç½‘å…³åè®®](https://www.zhihu.com/search?q=å†…éƒ¨ç½‘å…³åè®®&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A"25433049"})ï¼Œåœ¨ä¸€ä¸ªASå†…éƒ¨æ‰€ä½¿ç”¨çš„ä¸€ç§è·¯ç”±åè®®ã€‚ä¸€ä¸ªASå†…éƒ¨ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè·¯ç”±å™¨ç®¡ç†å¤šä¸ªç½‘ç»œã€‚å„ä¸ªè·¯ç”±å™¨ä¹‹é—´éœ€è¦è·¯ç”±ä¿¡æ¯ä»¥çŸ¥é“å­ç½‘ç»œçš„å¯è¾¾ä¿¡æ¯ã€‚IGPå°±æ˜¯ç”¨æ¥ç®¡ç†è¿™äº›è·¯ç”±ã€‚ä»£è¡¨çš„å®ç°æœ‰RIPå’ŒOSPFã€‚

ä¸ºå•¥éœ€è¦BGP: https://zhuanlan.zhihu.com/p/25433049

BGPå¯ä»¥è¯´æ˜¯æœ€å¤æ‚çš„è·¯ç”±åè®®ã€‚å®ƒæ˜¯[åº”ç”¨å±‚åè®®](https://www.zhihu.com/search?q=åº”ç”¨å±‚åè®®&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A"25433049"})ï¼Œå…¶ä¼ è¾“å±‚ä½¿ç”¨TCPï¼Œé»˜è®¤ç«¯å£å·æ˜¯179ã€‚å› ä¸ºæ˜¯åº”ç”¨å±‚åè®®ï¼Œå¯ä»¥è®¤ä¸ºå®ƒçš„è¿æ¥æ˜¯å¯é çš„ï¼Œå¹¶ä¸”ä¸ç”¨è€ƒè™‘åº•å±‚çš„å·¥ä½œï¼Œä¾‹å¦‚fragmentï¼Œç¡®è®¤ï¼Œé‡ä¼ ç­‰ç­‰ã€‚BGPæ˜¯å”¯ä¸€ä½¿ç”¨TCPä½œä¸ºä¼ è¾“å±‚çš„è·¯ç”±åè®®ï¼Œå…¶ä»–çš„è·¯ç”±åè®®å¯èƒ½éƒ½è¿˜åˆ°ä¸äº†ä¼ è¾“å±‚ã€‚å¹¶ä¸”BGPé€‚åˆå¤§è§„æ¨¡ç½‘ç»œç¯å¢ƒ

#### IP ç»„æ’­å’Œç§»åŠ¨ IP

IP çš„ç»„æ’­ multicastä¸€å®šåªç”¨åœ¨ UDP åè®®ä¸Šï¼Œæ™®é€šçš„ IP é€šä¿¡åªå‘ç”Ÿåœ¨ä¸€ä¸ªå‘é€æ–¹å’Œä¸€ä¸ªæ¥æ”¶æ–¹ä¹‹é—´ï¼Œè€Œ IP ç”¨D ç±» IP åœ°å€æ¥æ”¯æŒä¸€å¯¹å¤šçš„é€šä¿¡æˆ–è€…ç»„æ’­ï¼Œæ¯ä¸ª D ç±»åœ°å€æ ‡è¯†äº†ä¸€ç»„ä¸»æœºã€‚IGMP æ˜¯internet  group management åè®® .(IGMP) ç”¨æ¥è§£å†³å¹¿æ’­æˆå‘˜åˆ†å¸ƒåœ¨ä¸åŒç½‘ç»œä¸Šé¢çš„æƒ…å†µï¼Œåœ¨è‡ªæ²»ç³»ç»Ÿä¸­ä¸»è¦ä½¿ç”¨åè®®ç‹¬ç«‹ç»„æ’­åè®® PIM. å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç»„æ’­ä¸€æ¬¡åªå‘é€ä¸€ä»½æ•°æ®ã€‚

## lec12  ä¼ è¾“å±‚

##### ä½œç”¨

è¿è¾“å±‚å‘ä½äºå…¶ä¸Šçš„åº”ç”¨å±‚æä¾›é€šä¿¡æœåŠ¡ï¼Œæ˜¯ç”¨æˆ·åŠŸèƒ½ä¸­çš„æœ€åº•å±‚ï¼Œä¹Ÿæ˜¯å±äºé¢å‘é€šä¿¡éƒ¨åˆ†çš„æœ€é«˜å±‚ã€‚ è®¡ç®—æœºé€šä¿¡çš„çœŸæ­£ç«¯ç‚¹å¹¶ä¸æ˜¯ä¸»æœºï¼Œè€Œæ˜¯ä¸»æœºä¹‹ä¸­çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç«¯åˆ°ç«¯çš„é€šä¿¡å…¶å®æ˜¯ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ä¹‹é—´ çš„é€šä¿¡ã€‚
è¿è¾“å±‚æä¾›äº†è¿›ç¨‹ä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œè€Œç½‘ç»œå±‚åˆ™æä¾›äº†ä¸»æœºä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼ŒåŸºäºè¿™ç§åŠŸèƒ½ï¼Œè¿è¾“å±‚æœ€é‡è¦çš„åŠŸèƒ½æ˜¯å¤ç”¨ (multiplexing) å’Œåˆ†ç”¨ (demultiplexing), 

â€¢ å¤ç”¨ï¼šå‘é€æ–¹ä¸åŒçš„è¿›ç¨‹å¯ä»¥ç”¨åŒä¸€ä¸ªä¼ è¾“å±‚çš„åè®®æ¥ä¼ è¾“æ•°æ® â€¢ åˆ†ç”¨ï¼šæ¥æ”¶æ–¹çš„è¿è¾“å±‚åœ¨å¤„ç†å®ŒæŠ¥æ–‡ä¹‹åå¯ä»¥æŠŠæ•°æ®äº¤ä»˜ç»™æ­£ç¡®çš„æ¥æ”¶æ–¹è¿›ç¨‹

packet  ip è·¯ç”±

frame å·®é”™æ ¡éªŒ, çº é”™ 

ELEMENTS OF TRANSPORT PROTOCOLS â€¢ Addressing â€¢ Connection Establishment â€¢ Connection Release â€¢ Error Control and Flow Control â€¢ Multiplexing â€¢ Crash Recovery

The differences between transport services and network  services. 

ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªä¸åŒçš„å±‚ï¼Ÿ  â€“ ä¼ è¾“ä»£ç å®Œå…¨è¿è¡Œåœ¨ç”¨æˆ·æœºå™¨ä¸Šï¼Œä½†ç½‘ç»œå±‚ä¸»è¦è¿è¡Œåœ¨é€šå¸¸ç”±è¿è¥å•†è¿è¥çš„è·¯ç”±å™¨ä¸Šã€‚  â€“ ç½‘ç»œå±‚å­˜åœ¨é—®é¢˜ï¼ˆä¸¢å¤±æ•°æ®åŒ…ã€è·¯ç”±å™¨å´©æºƒâ€¦â€¦ï¼‰ â€“ ä¼ è¾“å±‚æé«˜äº†ç½‘ç»œå±‚çš„ QoSã€‚

â€“ ïƒ  The transport service is **more reliable** than the  network service. 

â€“ ïƒ Application programmers can write code according  to a standard set of transport service primitives and  have these programs work on a wide variety of  networks.

##### ä¼ è¾“å±‚å’Œlink å±‚çš„åŒºåˆ«

 â€“ Addressing:  â€¢ Link: implicit â€¢ Transport: explicit 

â€“ Connection establishment â€¢ Link: simple â€¢ Transport: complicated 

â€“ Storage capacity:  â€¢ Link: no â€¢ Transport: yes => a network can delay a packet 

â€“ Buffering â€¢ Link: allocate a fixed number of buffers to each line â€¢ Transport: a large number of connections and variations in the  bandwidth may require a dynamic and complicated approach.

##### addressing 

NSAP: Network service access point â€“ IP (32 bits)  â€¢ TSAP: Transport service access point â€“ Port (16 bits) 

â€¢ How a host knows a TSAP address at a server? â€“ Some TSAP addresses are so famous that they are  fixed, e.g. HTTP=80 and others listed in /etc/services â€“ A special process portmapper: service name ->  TSAP address 

â€¢ Many server processes will be used rarely and it  is wasteful to have them active â€“ process server: e.g. inetd on UNIX

##### é‡å¤äº†æ€ä¹ˆåŠ

discard ä¸¢å¼ƒ , ä½†æ˜¯There are two problems which complicates the  scenario: â€“ Possible wrap around of seqno â€“ Client/Host or Server may crash

â€¢ Two assumptions that simplifies the problem â€“ Assumption 1. Time for seqno wrap around å›åŒ… (T1) is typically large if, e.g., seqno is 32 bits  long.  â€“ Assumption 2. If pkt delays a relatively short  time (T2

ä¿è¯æ—¶é—´å¤Ÿé•¿åä¸€å®šæ˜¯æ–°çš„packet.

å¦‚æœè§è¿‡, æ—¶é—´å¾ˆçŸ­, å¯ä»¥ç¡®å®šæ˜¯é‡å¤åŒ….  å¦‚æœè§è¿‡, æ—¶é—´å¾ˆé•¿.     è®°ä½å­˜å‚¨ç©ºé—´å¾ˆå¤§?  å¯ä»¥è®°ä½æ²¡æœ‰æ”¶åˆ°çš„seqno,  ç”šè‡³éƒ½ä¸ç”¨è®°ä½seqno, è®°ä½sequence noå¤§å°å°±å¯ä»¥äº†.

##### Restrict packet lifetime

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯ä¹‹ä¸€å°†æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸé™åˆ¶ä¸ºå·²çŸ¥æœ€å¤§å€¼

â€“ Restricted subnet design.  â€“ Putting a hop counter in each packet.  â€“ Timestamping each packet (router synchronization  required)

use time-of-day clock to limit sending rate

The clocks at different hosts need not be  synchronized

##### å·®é”™æ§åˆ¶**Error control**

 is ensuring that the data is delivered with the desired level of reliability, usually that all of the data is delivered without any errors.
**Flow control** is keeping a fast transmitter from overrunning a slow receiver.
Solutions to these issues (same as data link layer): 

â€“ A frame carries error detecting codes, e.g., CRC

 â€“ ARQ: Automatic Repeat request

â€“ Max send window size w: stop and wait (w=1), large w enables pipelining
â€“ Sliding window protocol: combines the above features and supports bidirectional data transfer.

Differences: â€¢ Error detection: â€“ The link layer checksum protects a frame while it crosses a single link.
â€“ The transport layer checksum protects a segment while it crosses an entire network path. It is an end-to-end check, which is not the same as having a check on every link.
â€“ End-to-end argument: transport check is essential for correctness while link layer check is not essential but valuable for performance.
â€¢ Sliding window protocol: â€“ Link layer: stop and wait usually suffices, e.g., 802.11 

â€“ Transport layer: use larger window size

##### ååé‡

Whatâ€™s the average throughput of TCP as a function of window size and RTT? â€“ Ignore slow start
â€¢ Let W be the window size when loss occurs. â€¢ When window is W, throughput is W/RTT â€¢ Just after loss, window drops to W/2, throughput to W/2RTT.

flow æ§åˆ¶æ˜¯æ ¹æ®receive æ¥æ§åˆ¶, ç½‘ç»œä¸å¥½é‚£æ€ä¹ˆè°ƒæ•´å‘é€å‘¢?

## lec13 ä¼ è¾“å±‚

#### Crash Recovery

#### Congestion Controlæ‹¥å¡æ§åˆ¶

Max-Min Fairness

å…¬å¹³å’Œé«˜æ•ˆ, æœ€æ…¢çš„ç½‘ç»œæœ€å¤§åŒ–

Convergence. éœ€æ±‚æ˜¯ä¸æ–­å˜åŒ–çš„, è¦å¿«é€Ÿå“åº”, æ”¶æ•›åˆ°å†³ç­–çš„æœ€ä¼˜ç‚¹. 

explicit : congestion çš„æƒ…å†µæœ‰æ²¡æœ‰è®¾å¤‡å‘Šè¯‰sender.  TCP with ECN å’ŒXCPåè®®å¯ä»¥. å…¶ä»–çš„æ˜¯é delayå˜å¤§å’Œä¸¢åŒ…ç‡æ¥åˆ¤æ–­. 

ä¸ºä»€ä¹ˆè¦çº¿æ€§å¢åŠ ç„¶åæŒ‰æ¯”ä¾‹å¢é•¿? 

å› ä¸ºè¿™æ ·å¯ä»¥åˆ°æœ€ä¼˜ç‚¹, ä¸ä¼šåå¤éœ‡è¡.

ä¸ä¸€å®šæ‹¥å¡,  æ— çº¿ç½‘ç»œæœ¬èº«å°±å¯èƒ½ä¸¢åŒ…. é‚£æ€ä¹ˆæ£€æµ‹?

#### RPC

(Remote Procedure Call) allows programs to call  procedures located on remote hosts

å¯ä»¥æ¨¡ä»¿B/Sæ¶æ„çš„è°ƒç”¨æ–¹å¼ï¼Œåœ¨BæœåŠ¡æš´éœ²ä¸€ä¸ª[Restful](https://www.jianshu.com/p/e3c4b2837961)æ¥å£ï¼Œç„¶åAæœåŠ¡é€šè¿‡è°ƒç”¨è¿™ä¸ªRestfulæ¥å£æ¥é—´æ¥è°ƒç”¨CalculatorImplçš„addæ–¹æ³•ã€‚

å¾ˆå¥½ï¼Œè¿™å·²ç»å¾ˆæ¥è¿‘RPCäº†ã€‚ä¸è¿‡è¿™æ ·æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œéƒ½éœ€è¦å†™ä¸€ä¸²å‘èµ·httpè¯·æ±‚çš„ä»£ç ï¼Œæ¯”å¦‚httpClient.sendRequest...ä¹‹ç±»çš„ã€‚èƒ½ä¸èƒ½åƒæœ¬åœ°è°ƒç”¨ä¸€æ ·ï¼Œè®©ä½¿ç”¨è€…æ„ŸçŸ¥ä¸åˆ°è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹å‘¢?

**RPCè¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ï¼š**

1. è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨é—®é¢˜
2. è¿œç¨‹è°ƒç”¨æ—¶ï¼Œè¦èƒ½å¤Ÿåƒæœ¬åœ°è°ƒç”¨ä¸€æ ·æ–¹ä¾¿ï¼Œè®©è°ƒç”¨è€…æ„ŸçŸ¥ä¸åˆ°è¿œç¨‹è°ƒç”¨çš„é€»è¾‘

åº•å±‚ä¹Ÿæ˜¯ç”¨UDPå®ç°.

å·¥ä¸šç•Œæœ‰ä¸€äº›rustful api,   RPC åœ¨ç©¿é€çš„æ—¶å€™ æ€§èƒ½æœ‰åŒºåˆ«.  å¾ˆå¤šåœºæ™¯ç”¨rustful api. 

æœ‰çš„ä¸å¹‚ç­‰,  åº•å±‚è¦ç”¨TCP

æ¯”å¦‚ï¼Œæ—¢ç„¶æ˜¯åˆ†å¸ƒå¼äº†ï¼Œé‚£ä¹ˆä¸€ä¸ªæœåŠ¡å¯èƒ½æœ‰å¤šä¸ªå®ä¾‹ï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œè¦å¦‚ä½•è·å–è¿™äº›å®ä¾‹çš„åœ°å€å‘¢ï¼Ÿ

è¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚åœ¨Dubboé‡Œå¤´ï¼Œå°±å¯ä»¥ä½¿ç”¨Zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚åœ¨è°ƒç”¨æ—¶ï¼Œä»Zookeeperè·å–æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå†ä»ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œè°ƒç”¨

é‚£ä¹ˆé€‰å“ªä¸ªè°ƒç”¨å¥½å‘¢ï¼Ÿè¿™æ—¶å€™å°±éœ€è¦è´Ÿè½½å‡è¡¡äº†ï¼Œäºæ˜¯åˆå¾—è€ƒè™‘å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ï¼Œæ¯”å¦‚Dubboå°±æä¾›äº†å¥½å‡ ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚

è¿™è¿˜æ²¡å®Œï¼Œæ€»ä¸èƒ½æ¯æ¬¡è°ƒç”¨æ—¶éƒ½å»æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢å®ä¾‹åˆ—è¡¨å§ï¼Œè¿™æ ·æ•ˆç‡å¤šä½å‘€ï¼Œäºæ˜¯åˆæœ‰äº†ç¼“å­˜ï¼Œæœ‰äº†ç¼“å­˜ï¼Œå°±è¦è€ƒè™‘ç¼“å­˜çš„æ›´æ–°é—®é¢˜â€¦â€¦

#### RTP

Real-time Transport Protocol æ˜¯ä¸€ä¸ª ä¼ è¾“å±‚åè®®, ä½†æ˜¯å®ç°èµ·æ¥åƒæ˜¯åœ¨åº”ç”¨å±‚. ç”¨åœ¨Multimedia applications such as Internet radio, Internet  telephony, music-on-demand, videoconferencing. ä¸éœ€è¦å’ŒTCPä¸€æ ·æ·±å…¥äº†è§£head.  RTP æ˜¯base on UDPçš„. buffer è®©æ’­æ”¾æ›´æµç•…. 

#### TCP

TCP (Transmission Control Protocol) é€šè¿‡ä¸å¯é çš„ç½‘ç»œæä¾›å¯é çš„ç«¯åˆ°ç«¯å­—èŠ‚æµ

åˆ†ç»„, æ”¾åˆ°æ•°æ®åŒ…ä¸­ä¼ è¾“.

service model å°±æ˜¯ç”¨socket ä¸€äº›åŸè¯­æ¥æè¿°.

##### port

 20æ•°æ®ä¼ è¾“,21æ§åˆ¶ ftp , 22 ssh,  25 smtp, 80 http,   443 https. 110 pop3,  143IMAP , 23 telnet

å…¨éƒ½åœ¨ç­‰å¤ªæ¶ˆè€—èµ„æºäº†, éœ€è¦å®ˆæŠ¤è¿›ç¨‹,  inetd or xinetd. æ¥ä¸€ä¸ªè¯·æ±‚æ¥åˆ†é…ç»™å…·ä½“çš„åº”ç”¨. 

ä¸ºäº†æé«˜åˆ©ç”¨ç‡, å…ˆå†™åˆ°buffer ç­‰è¶³å¤Ÿå¤šå†å‘, ä½ ä¹Ÿå¯ä»¥ç”¨push flag æ¥å¼ºåˆ¶ç«‹åˆ»å‘é€. 

Each segment, åŒ…æ‹¬TCP header, must fit in the  65515 (=65535-20) byte IP payload. (Total length in IP  pkt is 16 bits long) å®é™…ä¸Šå¾ˆå°‘ç”¨åˆ°è¿™ä¹ˆå¤§çš„. 

Each network has a maximum transfer unit or MTU  (1500 for the Ethernet)

The TCP entities æ»‘åŠ¨çª—å£åè®®

sequence numberæ˜¯å¯¹bytesç¼–å· .ä¸æ˜¯å¯¹segment ç¼–å·. ç¡®è®¤æ˜¯å¯¹æŠ¥æ–‡æ®µç¡®è®¤. 

TCP header length: how many 32-bit words are contained  in the TCP header.  æ³¨æ„è¿™ ä¸ªlengthä¸æ˜¯bytesè€Œæ˜¯32 bits. è€ƒè¯•å¾ˆå¤šè®¡ç®—length .

RST bit: to reset a connection that has become confused due to a host  crash or some other reason.  

SYN bit: to used to establish connections. SYN for CONNECTION  REQUEST, SYN+ACK for CONNECTION ACCEPTED.   æ˜¯ç”¨æ¥å»ºç«‹è¿æ¥çš„. 

FIN bit: used to release a connection.

ä¾‹é¢˜:

In a network whose max segment is 128 bytes,  max segment lifetime is 30 sec, and has 8-bit  sequence numbers, what is the maximum data  rate per connection?

å¾ˆå¤§ä¼šåœ¨lifetimeå‡ºç°ä¸¤ä¸ªä¸€æ ·çš„sequence num.

30ç§’å†…ä¸èƒ½ä» 0 -256å†å›æ¥.  30sec  256bytes =256/30=8.533333 bytes/s

Sliding Windowæ¥å®ç°flow control

æ”¶åˆ°2K å›å¤ ack =2048(æ³¨æ„ä¸æ˜¯1) win =2048

Nagleâ€™s algorithm

å»¶æ—¶å˜å¾—å¾ˆå¤§.  è¿è¡Œæ•ˆç‡ä½. é¿å…ä¸€ä¸ªbytes ä¸€ä¸ªä¸ªå‘. 

##### Timer Management

Retransmission timer  è¦ä¸è¦é‡ä¼ çš„timer.  SRTT (Smoothed Round-Trip Time) 

SRTT = Î± SRTT + (1- Î±) R æ¯æ¬¡æ ¹æ®åˆ°è¾¾çš„ack æ¥è°ƒæ•´SRTT.

RTO (Retransmission TimeOut) RTO = SRTT  + 4 RTTVAR

Persistence timer é—®ä¸€é—®buffer æ˜¯ä¸æ˜¯0 ,  send probe to prevent the deadlock

Keepalive timer

æ»‘åŠ¨çª—å£å¤ªå¤§, ä¼šå¯¼è‡´è·¯ç”±å™¨å˜å¾—æ‹¥æŒ¤, ä¸»æœºå¯èƒ½ä¸¢å¤±åˆ†ç»„. 

##### Congestion Control

100ä¸‡ä¸ªPC åœ¨é“¾è·¯ä¸Šï¼Œ ç½‘ç»œä¸è¡Œäº†ï¼Œ æ‰€ä»¥éœ€è¦æ‹¥å¡æ§åˆ¶ã€‚ æµé‡æ§åˆ¶æ˜¯PCæ¥ä¸åŠæ¥æ”¶äº†ã€‚ 

TCPçš„æ‹¥å¡æ§åˆ¶é‡‡ç”¨äº†å››ç§ç®—æ³•ï¼Œå³ **æ…¢å¼€å§‹** ã€ **æ‹¥å¡é¿å…** ã€**å¿«é‡ä¼ ** å’Œ **å¿«æ¢å¤**ã€‚

- **æ…¢å¼€å§‹ï¼š** åˆå§‹å€¼ä¸º1ï¼Œæ¯ç»è¿‡ä¸€ä¸ªä¼ æ’­è½®æ¬¡ï¼Œæ”¶åˆ°ç¡®è®¤åcwndåŠ å€ã€‚
- **æ‹¥å¡é¿å…ï¼š**  > æ…¢å¼€å§‹é—¨é™slow start threshold,ç®€ç§° ssthreshåï¼Œè¿›å…¥æ‹¥å¡é¿å…ï¼Œ æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´RTT, æ”¶åˆ°ç¡®è®¤åå‘é€æ–¹çš„cwndåŠ 1.
- å¿«é‡ä¼   è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ackåï¼Œ ç›´æ¥é‡ä¼ ã€‚
- å¿«æ¢å¤ï¼Œ è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ackåï¼Œ æŠŠcwnd è®¾ç½®ä¸º slow start threash çš„å¤§å°ï¼Œ ç„¶åæ‰§è¡Œ æ‹¥å¡é¿å…

ä¸‰æ¬¡è¶…æ—¶åcwndä¸º1.   Slow start from an initial congestion window of 1 segment

cwnd æ…¢å¼€å§‹å¿«é€Ÿç¿»å€,  ç„¶åæ‹¥å¡é¿å…çº¿æ€§å¢é•¿, ç„¶å3æ¬¡è¶…æ—¶å˜æˆ1 .  å®é™…å‘é€é€Ÿåº¦æ¯”è¾ƒæ…¢, æ‰€ä»¥å«slow

æŠŠpacket loss åˆ†æˆäº†ä¸¤ç±», æ”¶åˆ°3ä¸ªduplicate acks, å°± cwnd é™åŠ, fast recovery,  è€Œæ˜¯å›åˆ°threshold å¼€å§‹çº¿æ€§å¢åŠ . å¦‚æœ timeout é‚£å°±è®¤ä¸ºæ˜¯ä¸¥é‡çš„é˜»å¡, cwndé™ä½åˆ°1. 

send rate =  cwnd /RTT  round trip time

æ‹¥å¡é¿å…çš„æ—¶å€™,  cwnd = cwnd + MSS *(MSS/cwnd)  ä¸¤æ¬¡æ‰èƒ½ç¿»å€

Average throughout: 0.75 W/RTT

## lec14åº”ç”¨å±‚

### DNS

why DNS?   è®°ipåœ°å€å¤ªéº»çƒ¦. 

13ä¸ªé¡¶çº§åŸŸårootæœåŠ¡å™¨, å›½å†…ä¸€ä¸ªéƒ½æ²¡æœ‰, åªæœ‰å‡ ä¸ªé•œåƒ. 

èµ„æºç±»å‹ 

A    ipv4 åœ°å€ 

MX     ä¾‹å¦‚  3 top

TXT  éƒ½æ˜¯ascii text

SOA   ä¾‹å¦‚  star boss( 9527 ,xxx ) 



 æ ¹åŸŸåæœåŠ¡å™¨ æœ‰13ä¸ª

æœ€é«˜å±‚æ¬¡, æœ€é‡è¦, 

æ‰€æœ‰æ ¹åŸŸåæœåŠ¡å™¨ éƒ½çŸ¥é“ æ‰€æœ‰çš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ipåœ°å€. 

ä»»ä½•local æ— æ³•è§£æçš„æ—¶å€™éƒ½é¦–å…ˆæ±‚åŠ© root , é€šå¸¸å‘Šè¯‰local ä¸‹ä¸€æ­¥æ‰¾å“ªä¸ª top 

é¡¶çº§åŸŸåæœåŠ¡å™¨,ç®¡ç†äºŒçº§åŸŸå. 

æˆæƒåŸŸåæœåŠ¡å™¨, æŠŠç®¡è¾–çš„ä¸»æœºåè½¬æ¢ä¸º è¯¥ä¸»æœºçš„ipåœ°å€. æ¯å°ä¸»æœºå¿…é¡»åœ¨æˆæƒåŸŸåæœåŠ¡å™¨ æ³¨å†Œ, 

æœ¬åœ°åŸŸåæœåŠ¡å™¨, 

æœ€åè¦é—®å››æ¬¡, æœ¬åœ°, æ ¹.com,  é¡¶çº§xyz.com, æƒé™ abc.xyz.com

### WWW

å˜åŒ–å¾ˆå¿«,æ¯å¹´éƒ½æœ‰å˜åŒ–. 

ç‚¹ä¸‹é“¾æ¥åå‘ç”Ÿäº†ä»€ä¹ˆ?

ç‚¹ä¸‹é“¾æ¥, æµè§ˆå™¨ é—® DNS  ipåœ°å€, 

DNS å›å¤IPåœ°å€,  

 æµè§ˆå™¨ äº§ç”Ÿ port80çš„tcp è¿æ¥, å‘é€request  è¯·æ±‚htmlæ–‡ä»¶ 

server å›å¤å‘é€htmlæ–‡ä»¶

tcp è¿æ¥é‡Šæ”¾.

æµè§ˆå™¨æ˜¾ç¤ºæ–‡å­—

æµè§ˆå™¨fetches and display å›¾ç‰‡. 

A URL points to one specific host ,  æœ‰æ—¶å€™ä¸éœ€è¦å…³æ³¨åœ°ç‚¹, URI  (uniform resource identifiers)æ˜¯å…³æ³¨è¿™ä¸ªæ˜¯ä»€ä¹ˆä¸œè¥¿.  

URL åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†, protocol å¦‚http,  DNS name , è¿˜æœ‰ file name æ¯”å¦‚ index.html

Some URIs tell how to locate a resource. These are  the URLs.  

â€¢ Other URIs tell the name of a resource but not where  to find it. These URIs are called URNs (Uniform  Resource Names).

##### server 

1. Resolve the name of the Web page requested.  

2. Perform access control on the Web page. 
3.  Check the cache.  
4.  Fetch the requested page from disk or run a program to  build it.  
5. Determine the rest of the response (e.g., the MIME type to  send). 
6. Return the response to the client. 
7.  Make an entry in the server log

##### cookies

web åŸºæœ¬ä¸Šæ˜¯statelessçš„. 

track user é€šè¿‡è§‚å¯Ÿipå—? ä¸èƒ½ä¿è¯æ˜¯åŒä¸€ä¸ªç”¨æˆ·.   è®©æµè§ˆå™¨ä¿å­˜cookie, ä¸‹ä¸€æ¬¡æ¥, æµè§ˆå™¨ä¼šå‘é€cookie ç»™ç½‘ç«™. serverçœ‹åˆ°äº†ä¹‹åå°±çŸ¥é“

tokenæ˜¯æœåŠ¡å™¨å‘ç»™ä½ çš„å‡­è¯.  cookie è®©æœåŠ¡å•†å¯ä»¥å®šä½æ¯ä¸ªç”¨æˆ·

### é™æ€é¡µé¢

##### HTML

css   cascading style sheets , è§„å®š h1 ç”¨ä»€ä¹ˆå­—ä½“, h2 ç”¨ä»€ä¹ˆå­—ä½“, æµè§ˆå™¨æ ¹æ®css è¿›è¡Œå®é™…çš„æ¸²æŸ“. 

### åŠ¨æ€é¡µé¢

#### CGI

 (Common Gateway Interface): provides an interface  to allow Web servers to talk to back-end programs and  scripts (e.g. Python, Ruby, Perl) that can accept input (e.g.  from forms) and generate HTML pages in response. 

 â€“ Server pages: to embed little scripts inside HTML pages  åµŒåœ¨ html å†…éƒ¨çš„è„šæœ¬ and have them be executed by the server itself to generate  the page.  â€¢ PHP: Hypertext Preprocessor â€¢ JSP: Java Server Pages â€¢ ASP.NET: Active Server Page

php æ‰§è¡Œå®Œäº†, è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªé¡µé¢. 

#### æœåŠ¡ç«¯page

php, jsp, asp.net ä¸‰ç§ 

PHP (Hypertext Preprocessor) 

â€¢ JSP (JavaServer Pages): the dynamic part is written in the Java programming language. Pages using this technique have the file extension .jsp. 

â€¢ ASP.NET (Active Server Pages .NET) is Microsoftâ€™s version of PHP and JavaServer Pages. It uses programs written in Microsoftâ€™s proprietary .NET networked application framework for generating the dynamic content. Pages using this technique have the extension .aspx.

#### å®¢æˆ·ç«¯è„šæœ¬

ä¸Šé¢çš„è¿™å‡ ä¸ªæœ‰é—®é¢˜:  What none of them can do is respond to mouse movements or interact with users directly

Starting with HTML 4.0, these scripts are permitted using the tag 

åœ¨æµè§ˆå™¨ä¸Šæ¸²æŸ“ , ä¼šè€ƒè¿™å‡ ä¸ªè½¯ä»¶åå­—

JavaScript is very popular way to make Web pages highly interactive. 

â€¢ VBScript (based on Visual Basic) is an alternative on Windows platfroms. 

â€¢ Java applets runs on the JVM (Java Virtual Machine) 

â€¢ ActiveX Controls (which are programs compiled to x86 machine language and executed on the bare hardware) from Microsoft runs on Windows

##### AJAX

AJAX is a set of technologies that work together to enable  Web applications that are every bit as responsive and  powerful as traditional desktop applications. The  technologies are: 

1. HTML and CSS to present information as pages. 
2.  XML (eXtensible Markup Language) to let programs exchange  application data with the server. 
3. DOM (Document Object Model) to change parts of pages while  they are viewed. 
4. An asynchronous way for programs to send and retrieve XML  data. 
5. JavaScript as a language to bind all this functionality together.

æ“æ§dom æ–‡ä»¶ document object model

dom tree :

##### XML

XMLï¼ˆå¯æ‰©å±•æ ‡è®° extensible markup languageè¯­è¨€ï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨äºæŒ‡å®šç»“æ„åŒ–å†…å®¹çš„è¯­è¨€ã€‚
â€¢ HTML å°†å†…å®¹ä¸æ ¼å¼æ··åˆåœ¨ä¸€èµ·ï¼Œå› ä¸ºå®ƒä¸ä¿¡æ¯çš„å‘ˆç°æœ‰å…³ã€‚
â€¢ XML å…è®¸æ„å»º Web å†…å®¹ä»¥è¿›è¡Œè‡ªåŠ¨å¤„ç†ã€‚
â€¢ æ²¡æœ‰ä¸º XML å®šä¹‰çš„æ ‡ç­¾ã€‚ æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥å®šä¹‰è‡ªå·±çš„æ ‡ç­¾ã€‚

##### å¼‚æ­¥è¯·æ±‚

To provide a responsive interface in the browser while sending or  receiving data, it must be possible for scripts to perform asynchronous  I/O that does not block the display while awaiting the response to a  request.

Modern browsers have support for this model of communication

ä¸ºäº†åœ¨å‘é€æˆ–æ¥æ”¶æ•°æ®æ—¶åœ¨æµè§ˆå™¨ä¸­æä¾›å“åº”å¼ç•Œé¢ï¼Œè„šæœ¬å¿…é¡»èƒ½å¤Ÿæ‰§è¡Œå¼‚æ­¥ I/Oï¼Œåœ¨ç­‰å¾…å¯¹è¯·æ±‚çš„å“åº”æ—¶ä¸ä¼šé˜»å¡æ˜¾ç¤ºã€‚
â€¢ ä¾‹å¦‚ï¼Œè€ƒè™‘å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ»šåŠ¨çš„åœ°å›¾ã€‚
å½“é€šçŸ¥æ»šåŠ¨åŠ¨ä½œæ—¶ï¼Œå¦‚æœåœ°å›¾çš„è§†å›¾é è¿‘æ•°æ®çš„è¾¹ç¼˜ï¼Œåœ°å›¾é¡µé¢ä¸Šçš„è„šæœ¬å¯èƒ½ä¼šä»æœåŠ¡å™¨è¯·æ±‚æ›´å¤šçš„åœ°å›¾æ•°æ®ã€‚
â€¢ è·å–è¿™äº›æ•°æ®æ—¶ï¼Œæ¥å£ä¸åº”å†»ç»“ã€‚
â€¢ ç›¸åï¼Œæ»šåŠ¨åº”è¯¥ç»§ç»­é¡ºåˆ©è¿›è¡Œã€‚
â€¢ å½“æ•°æ®åˆ°è¾¾æ—¶ï¼Œè„šæœ¬ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œä»¥ä¾¿å®ƒå¯ä»¥ä½¿ç”¨æ•°æ®ã€‚
å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œå°†åœ¨éœ€è¦ä¹‹å‰è·å–æ–°çš„åœ°å›¾æ•°æ®ã€‚
â€¢ ç°ä»£æµè§ˆå™¨æ”¯æŒè¿™ç§é€šä¿¡æ¨¡å‹ã€‚

#### HTTP

HTTP æ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå› ä¸ºå®ƒè¿è¡Œåœ¨ TCP ä¹‹ä¸Šå¹¶ä¸”ä¸ Web å¯†åˆ‡ç›¸å…³ã€‚  ä¼šè€ƒ
â€¢ ç°åœ¨HTTP å˜å¾—æ›´åƒæ˜¯ä¸€ç§ä¼ è¾“åè®®ï¼Œå®ƒä¸ºè¿›ç¨‹æä¾›ä¸€ç§è·¨è¶Šä¸åŒç½‘ç»œè¾¹ç•Œè¿›è¡Œå†…å®¹é€šä¿¡çš„æ–¹å¼ã€‚
è¿™äº›è¿›ç¨‹ä¸å¿…æ˜¯ Web æµè§ˆå™¨å’Œ Web æœåŠ¡å™¨ã€‚
â€“ åª’ä½“æ’­æ”¾å™¨å¯ä»¥ä½¿ç”¨ HTTP ä¸æœåŠ¡å™¨é€šä¿¡å¹¶è¯·æ±‚ä¸“è¾‘ä¿¡æ¯ã€‚
â€“ é˜²ç—…æ¯’è½¯ä»¶å¯ä»¥ä½¿ç”¨ HTTP ä¸‹è½½æœ€æ–°æ›´æ–°ã€‚

HTTP 1.0 with multiple connection

http1.1  with persistent connections  ä¹Ÿå°±æ˜¯é•¿è¿æ¥, è¿æ¥å»ºç«‹ä¸€æ¬¡, ä¸‹æ¬¡ç›´æ¥å‘è¯·æ±‚å°±å¯ä»¥äº†.

HTTPæ˜¯æ— çŠ¶æ€åè®®

TCP æœåŠ¡æœ‰  FTP, telnet, SMTP , HTTP, POP3   UDP æœåŠ¡æœ‰ DNS, SNMP ,QQ

å†…ç½®http reuest æ–¹æ³•: 

GET  è¦æ±‚è¯»ä¸€ä¸ªweb page

HEAD  è¦æ±‚è¯»ä¸ªheader.  ä¸éœ€è¦è¿”å›è¯·æ±‚å¯¹è±¡

PUT  è¦æ±‚ store ä¸€ä¸ªweb page  

POST append ä¸€ä¸ª named resource  POSTæ–¹æ³•ç”¨äºå°†å®ä½“æäº¤åˆ°æŒ‡å®šçš„èµ„æºï¼Œé€šå¸¸å¯¼è‡´åœ¨æœåŠ¡å™¨ä¸Šçš„çŠ¶æ€å˜åŒ–æˆ–å‰¯ä½œç”¨ã€‚

DELETE remove web page

TRACE  echo æ¥ä¸‹æ¥çš„request

CONNECTæ–¹æ³•å»ºç«‹ä¸€ä¸ªåˆ°ç”±ç›®æ ‡èµ„æºæ ‡è¯†çš„æœåŠ¡å™¨çš„éš§é“ã€‚

#### The Mobile Web

 Difficulties for mobile phones browsing the web

1. Relatively small screens preclude large pages  and large images. 
2. Limited input capabilities make it tedious to enter  URLs or other lengthy input.
3.  Network bandwidth is limited over wireless links,  particularly on 3G networks å¤ªè´µäº†
4. Connectivity may be intermittent. 
5. Computing power is limited, for reasons of battery life, size, heat dissipation, and cost.

å¯ä»¥ç”¨3ç§æ–¹æ³•:  cache, server replication, content delivery networkæ¥åŠ å¿«access web pageçš„é€Ÿåº¦.  ä¼šè€ƒ 

å†…å®¹åˆ†å‘ç½‘ç»œèŠ‚ç‚¹ä¼šåœ¨å¤šä¸ªåœ°ç‚¹ï¼Œå¤šä¸ªä¸åŒçš„ç½‘ç»œä¸Šæ‘†æ”¾ã€‚è¿™äº›èŠ‚ç‚¹ä¹‹é—´ä¼šåŠ¨æ€çš„äº’ç›¸ä¼ è¾“å†…å®¹ï¼Œå¯¹ç”¨æˆ·çš„ä¸‹è½½è¡Œä¸ºä¼˜åŒ–ï¼Œå¹¶å€Ÿæ­¤å‡å°‘å†…å®¹ä¾›åº”è€…æ‰€éœ€è¦çš„å¸¦å®½æˆæœ¬ï¼Œæ”¹å–„ç”¨æˆ·çš„ä¸‹è½½é€Ÿåº¦ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚

#### Email

Two kinds of Message Formats 

â€“ RFC 5322 â€“ The Internet Message format â€“ Envelop fields vs message fields â€“ ASCII message format 

â€“ MIME (Multipurpose Internet Mail Extensions) message format

gmail æµè§ˆå™¨ç»™é‚®ä»¶æœåŠ¡å™¨å‘æ˜¯httpåè®®, ä¸åŒé‚®ä»¶æœåŠ¡å™¨ç”¨ smtp åè®®.

POP3 åœ¨ä¼ è¾“å±‚æ˜¯æ˜æ–‡ä¼ è¾“å¯†ç çš„, åŸºäºasciiç  

SMTP port25, asciiåè®®,TCPè¿æ¥. 

##### MIME

éasciiç çš„æ•°æ®, è¦ç”¨mimeåè®®è½¬æ¢. 

messageç±»å‹ åŒ…æ‹¬ http,rfc822  ä¼šè€ƒ. 

audioç±»å‹ åŒ…æ‹¬ basic, mpeg, mp4 

## chapter8 ç½‘ç»œå®‰å…¨

#### Intrusion Detection and Prevention

IDS (Intrusion Detection System)

IPS (Intrusion Prevention System)

### å¯¹ç§°åŠ å¯†ç®—æ³•

#### DES 

#### AES 

The Advanced Encryption Standard

The algorithm must be a symmetric block cipher.

#### PUBLIC-KEY ALGORITHMS

How Alice and Bob establish a secure channel?  ä¼šè€ƒ

â€“ Both Alice's encryption key, EA, and Bob's encryption key, EB, are assumed to be in a publicly readable file. 

â€“ Now Alice takes her first message, P, computes EB(P) ç„¶åå‘é€ 

â€“ Bob then decrypts it by applying his secret key DB [i.e. DB(EB(P) ) = P].  æ¥æ”¶æ–¹ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†. 

â€“ No one else can read the encrypted message EB(P), because the encryption system is assumed strong and because it is too difficult to derive DB from the publicly known EB. 

#### RSA algorithm

Factoring large numbers is very difficult. RSA çš„ä¿å¯†ä½“ç³»éƒ½æ˜¯å»ºç«‹åœ¨è¿™ä¸ªä¸Šé¢çš„. 

#### æ•°å­—ç­¾å

Digital Signatures

##### Symmetric-key signatures 

â€¢ BB (Big Brother): the central authority that knows everything and whom everyone trusts. 

Each user chooses a secret key and carries it by hand to BBâ€™s office. Thus , only Alice and BB know Aliceâ€™s secret key, KA and, so on. 

â€¢ Alice sends a signed plaintext message P to Bob. â€“ RA, a random number chosen by Alice. â€“ t, timestamp to prevent replay attack.  æ—¶é—´æˆ³å¯ä»¥é˜²æ­¢replay attack . è¿‡å‡ ä¸ªå°æ—¶replayäº†å°±å‘ç°æ˜æ˜¾ä¸å¯¹.   å¦‚æœè¿‡å‡ ç§’å¯èƒ½ä¼šä¼ªé€ . 

ä½†æ˜¯éœ€è¦KBBå­˜åœ¨ 

##### Public key signatures

if Alice discloses her secret key?   å¯èƒ½è¢«ä¼ªé€ . 

â€“ if Alice modifies her secret key? 

##### Message Digests

A message digest is a cryptographic hash function containing a string of digits created by a one-way hashing formula

è®¡ç®—MD5 , é”™äº†ä¸€ä¸ªbit, outputå®Œå…¨ä¸ä¸€æ ·. 

##### The Birthday Attack

A 64-bit MD can probably be broken by generating about 2^32 messages and looking for two with the same message digest. 

#### æ€ä¹ˆè·å¾—public key 

â€¢ One solution: Bob puts his public key in the website for others to retrieve.

å®é™…ä¸Š, æ˜¯ä¾é è¯ä¹¦,  certification authority  CA.  å’Œ big brotherä¸åŒ. ä»–æ˜¯certify public key çš„.  æµè§ˆå™¨ä¹Ÿæ˜¯ç”¨CA.

X.509 is the standard for managing the certificates



Authentication Protocols: Shared Secret Key

æ€ä¹ˆè¯æ˜ä½ æ˜¯A , æŠŠä¸€ä¸ªéšæœºæ•°ç”¨å…±åŒçš„åŠ å¯†. 

Bob æ”¶åˆ°äº†,  Aå‘ä¸ªéšæœºæ•°RAç»™bob ,ç„¶å bobè¿”å›  Kab(ra) 

è¿˜æœ‰ä¸€ä¸ªç®€åŒ–çš„ç‰ˆæœ¬. 

å°±æ˜¯Aå‘Raå’Œ,  bob è¿”å›  Kab(Ra ) åŒæ—¶  Rb.   Alice è¿”å› Kab(Rb)

ä½†æ˜¯è¿™ä¸¤ä¸ªéƒ½å¾ˆå®¹æ˜“è¢«æ”»å‡»!!

æ¯”å¦‚ç®€åŒ–ç‰ˆæœ¬  æ”»å‡»è€…Trudy å‘Šè¯‰bobæˆ‘æ˜¯alice,  å‘RT challenge bob. ç„¶åbobå›å¤.   Kab(Rt ) åŒæ—¶å‘é€éšæœºæ•°Rb challenge trudy. 

ç„¶å Trudy ç”¨å¦ä¸€ä¸ªsession å‘é€ A, **Rb**, ç„¶åbob å›å¤åŠ å¯†åçš„  Kab(Rb ) å°±æŠŠKab(Rb) å‘Šè¯‰ trudyäº†. 

ä½†æ˜¯è¿™ä¸ªä¸èƒ½æ”»å‡» åŸç‰ˆæœ¬.

  åŸç‰ˆæœ¬ ä¸ä¼šåŒæ—¶å›å¤éšæœºæ•°å’Œ Kab(Rb) , ä¸è¿‡ trudy å¯ä»¥æ”»å‡» alice.  

åŸºæœ¬åŸç†å°±æ˜¯ å¼€ä¸¤ä¸ªsession, è®©å¯¹æ–¹æŠŠåŠ å¯†åçš„éšæœºæ•°å‘è¿‡æ¥.

#### å¯†é’¥åˆ†å‘
